<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>基于ENSP的千人规模冗余型企业/校园网络设计与规划 | UncleC's blog</title><meta name="keywords" content="ensp网络实验"><meta name="author" content="挖掘机师傅"><meta name="copyright" content="挖掘机师傅"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="基于eNSP的千人规模冗余型企业&#x2F;校园网络设计与规划前言简介​	由于华为近几年在国内的市场越来越大，网络工程师中的组网技术的题目都由思科变为了华为，所以华为的设备还是有必要学习一下的了；本文用华为提供的eNSP模拟器模拟出了可以用于校园&#x2F;企业网络的规划与设计实现。同时也可以作为大学生的学期课程设计，由于本文章只提供在设计过程中的关键技术与设计笔记（可根据以下所提供的设计与实现步">
<meta property="og:type" content="article">
<meta property="og:title" content="基于ENSP的千人规模冗余型企业&#x2F;校园网络设计与规划">
<meta property="og:url" content="https://unclecheng-li.github.io/2022/09/11/%E5%9F%BA%E4%BA%8EENSP%E7%9A%84%E5%8D%83%E4%BA%BA%E8%A7%84%E6%A8%A1%E5%86%97%E4%BD%99%E5%9E%8B%E4%BC%81%E4%B8%9A-%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%A7%84%E5%88%92/index.html">
<meta property="og:site_name" content="UncleC&#39;s blog">
<meta property="og:description" content="基于eNSP的千人规模冗余型企业&#x2F;校园网络设计与规划前言简介​	由于华为近几年在国内的市场越来越大，网络工程师中的组网技术的题目都由思科变为了华为，所以华为的设备还是有必要学习一下的了；本文用华为提供的eNSP模拟器模拟出了可以用于校园&#x2F;企业网络的规划与设计实现。同时也可以作为大学生的学期课程设计，由于本文章只提供在设计过程中的关键技术与设计笔记（可根据以下所提供的设计与实现步">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.imagehub.cc/images/2022/09/12/04.jpg">
<meta property="article:published_time" content="2022-09-11T14:06:06.000Z">
<meta property="article:modified_time" content="2022-09-12T05:44:32.240Z">
<meta property="article:author" content="挖掘机师傅">
<meta property="article:tag" content="ensp网络实验">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.imagehub.cc/images/2022/09/12/04.jpg"><link rel="shortcut icon" href="https://s1.imagehub.cc/images/2022/09/04/favicon.png"><link rel="canonical" href="https://unclecheng-li.github.io/2022/09/11/%E5%9F%BA%E4%BA%8EENSP%E7%9A%84%E5%8D%83%E4%BA%BA%E8%A7%84%E6%A8%A1%E5%86%97%E4%BD%99%E5%9E%8B%E4%BC%81%E4%B8%9A-%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%A7%84%E5%88%92/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '基于ENSP的千人规模冗余型企业/校园网络设计与规划',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-09-12 13:44:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://avatars.githubusercontent.com/u/55303635?s=400&amp;u=1035a04b6e0bd0e8543b68f2caad21c0a5077aab&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s1.imagehub.cc/images/2022/09/11/04.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">UncleC's blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">基于ENSP的千人规模冗余型企业/校园网络设计与规划</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-11T14:06:06.000Z" title="发表于 2022-09-11 22:06:06">2022-09-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-09-12T05:44:32.240Z" title="更新于 2022-09-12 13:44:32">2022-09-12</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="基于ENSP的千人规模冗余型企业/校园网络设计与规划"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="基于eNSP的千人规模冗余型企业-x2F-校园网络设计与规划"><a href="#基于eNSP的千人规模冗余型企业-x2F-校园网络设计与规划" class="headerlink" title="基于eNSP的千人规模冗余型企业&#x2F;校园网络设计与规划"></a>基于eNSP的千人规模冗余型企业&#x2F;校园网络设计与规划</h1><h2 id="前言简介"><a href="#前言简介" class="headerlink" title="前言简介"></a>前言简介</h2><p>​	由于华为近几年在国内的市场越来越大，网络工程师中的组网技术的题目都由思科变为了华为，所以华为的设备还是有必要学习一下的了；本文用华为提供的eNSP模拟器模拟出了可以用于校园&#x2F;企业网络的规划与设计实现。同时也可以作为大学生的学期课程设计，由于本文章只提供在设计过程中的关键技术与设计笔记<strong>（可根据以下所提供的设计与实现步骤一步一步自行实现（每一条命令都是关键的命令）</strong></p>
<p> 以下是相应的地址规划表及其相应规划清单(由于不好编辑就以图片形式上传) </p>
<p><img src="https://s1.imagehub.cc/images/2022/09/11/01c194c0d5e8571333.jpg"></p>
<p><img src="https://s1.imagehub.cc/images/2022/09/11/02.png"></p>
<p><img src="https://s1.imagehub.cc/images/2022/09/11/03.png"></p>
<h2 id="一、设计要求与设计topo图"><a href="#一、设计要求与设计topo图" class="headerlink" title="一、设计要求与设计topo图"></a>一、设计要求与设计topo图</h2><p><img src="https://s1.imagehub.cc/images/2022/09/11/04.png"></p>
<h2 id="二、需求分析"><a href="#二、需求分析" class="headerlink" title="二、需求分析"></a>二、需求分析</h2><p>​	我们用到的设计思想就是根据交换机的三层架构来设计，核心层进行高速转发、冗余、均衡；汇聚层进行策略控制ACL、VLAN、Qos、分组过滤、路由选择、组播管理；最后的接入层给用户接入，多端口、用户访问控制；利用VRRP_MSTP对网络链路和设备进行冗余备份和负载均衡；设置了两个出口，电信用PPPoE拨号上网（比较廉价且不用就浪费了）</p>
<h2 id="三、设计要求与前提"><a href="#三、设计要求与前提" class="headerlink" title="三、设计要求与前提"></a>三、设计要求与前提</h2><p>1）提前好由华为提供的eNSP模拟器软件（安装eNSP的前提需要先安装：VirtualBox、WinPcap、Wireshark这个三个软件作为底层的软件）<br>2）电脑的配置内存尽量都在8GB及以上的内存<br>3）提前掌握一些网络设计与规划的这些单个技术的使用<br>4）该综合实验使用到的关键技术有：DHCP、OSPF、RIP、NAT、Telnet、ACL、静态路由、vlan划分、VRRP+MSTP、BFD路由联动、NAT server地址映射、PPPoE、DHCP中继、Eth-Trunk、无线WLAN等关键技术及其相关配置<br>5）实验用到的网络设备有：S3700交换机、S5700交换机、Router路由器、Router3260路由器、Server服务器、Client客户端、AC6605控制器、AP9131无线访问接入点、STA笔记本<br>6)设备的名称规则，如HX_SW1代表核心层交换机SW1；HJ_SW2表示汇聚交换机SW3；JR_SW5表示接入交换机SW5； DX_R2、LT_R3、FZ-R4就分别表示电信、联通、分支路由器</p>
<h2 id="四、网络topo分析及其规划"><a href="#四、网络topo分析及其规划" class="headerlink" title="四、网络topo分析及其规划"></a>四、网络topo分析及其规划</h2><p>​	网络拓扑(Network Topology)结构是指用传输介质互连各种设备的物理布局。指构成网络的成员间特定的物理的即真实的、或者逻辑的即虚拟的排列方式。如果两个网络的连接结构相同我们就说它们的网络拓扑相同，尽管它们各自内部的物理接线、节点间距离可能会有不同。网络设计中冗余备份和负载均衡的核心技术就需要用到VRRP+MSTP关键技术；用户自动获取IP地址当然需要开启DHCP(集合负载均衡这要求使用的时候DHCP中继为用户分配IP地址)</p>
<h2 id="五、设计与实现"><a href="#五、设计与实现" class="headerlink" title="五、设计与实现"></a>五、设计与实现</h2><p><img src="https://s1.imagehub.cc/images/2022/09/11/05.png"></p>
<h3 id="1、VLAN-Trunk配置"><a href="#1、VLAN-Trunk配置" class="headerlink" title="1、VLAN Trunk配置"></a>1、VLAN Trunk配置</h3><p><img src="https://s1.imagehub.cc/images/2022/09/11/06.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">	HJ_SW3:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un  in en</span><br><span class="line">[Huawei]sysname HJ_SW3</span><br><span class="line">[HJ_SW3]int Eth-Trunk 1</span><br><span class="line">[HJ_SW3-Eth-Trunk1]mode lacp-static //聚合模式选择lacp-static模式</span><br><span class="line">[HJ_SW3-Eth-Trunk1]trunkport e0/0/4 //加入交换机上相应的端口</span><br><span class="line">[HJ_SW3-Eth-Trunk1]trunkport e0/0/5</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">    JR_SW6:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname JR_SW6</span><br><span class="line">[JR_SW6]int Eth-Trunk 1</span><br><span class="line">[JR_SW6-Eth-Trunk1]mode lacp-static </span><br><span class="line">[JR_SW6-Eth-Trunk1]trunkport e0/0/1</span><br><span class="line">[JR_SW6-Eth-Trunk1]trunkport e0/0/3</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">	HX_SW1:</span><br><span class="line">&lt;Huawei&gt;syS</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname HX_SW1</span><br><span class="line">[HX_SW1]int Eth-Trunk 2</span><br><span class="line">[HX_SW1-Eth-Trunk2]mode lacp-static </span><br><span class="line">[HX_SW1-Eth-Trunk2]trunkport g0/0/2</span><br><span class="line">[HX_SW1-Eth-Trunk2]trunkport g0/0/3</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HX_SW2:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname HX_SW2</span><br><span class="line">[HX_SW2]int Eth-Trunk 2</span><br><span class="line">[HX_SW2-Eth-Trunk2]mode  lacp-static </span><br><span class="line">[HX_SW2-Eth-Trunk2]trunkport g0/0/1</span><br><span class="line">[HX_SW2-Eth-Trunk2]trunkport g0/0/2</span><br><span class="line">[HX_SW2-Eth-Trunk2]q</span><br><span class="line">[HX_SW2]dis eth-trunk  //查看这个eth-trunk的配置</span><br></pre></td></tr></table></figure>

<h3 id="2、vlan的底层配置"><a href="#2、vlan的底层配置" class="headerlink" title="2、vlan的底层配置"></a>2、vlan的底层配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">	JR_SW5:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname JR_SW5</span><br><span class="line">[JR_SW5]vlan batch 2 to 5 900 //批量创建vlan</span><br><span class="line">[JR_SW5]int e0/0/2</span><br><span class="line">[JR_SW5-Ethernet0/0/2]port link-type access //配置端口为access模式</span><br><span class="line">[JR_SW5-Ethernet0/0/2]port default vlan 2  //默认允许通过的是vlan 2</span><br><span class="line">[JR_SW5-Ethernet0/0/2]q</span><br><span class="line">[JR_SW5]int e0/0/1</span><br><span class="line">[JR_SW5-Ethernet0/0/1]port link-type trunk //配置端口为trunk模式</span><br><span class="line">[JR_SW5-Ethernet0/0/1]port trunk allow-pass vlan 2 900 //允许vlan2和管理vlan900通过</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    JR_SW6:</span><br><span class="line">[JR_SW6]vlan ba	</span><br><span class="line">[JR_SW6]vlan batch 2 to 5 900</span><br><span class="line">[JR_SW6]int e0/0/2</span><br><span class="line">[JR_SW6-Ethernet0/0/2]port link-type access </span><br><span class="line">[JR_SW6-Ethernet0/0/2]port default vlan 3</span><br><span class="line">[JR_SW6-Ethernet0/0/2]q</span><br><span class="line">[JR_SW6]int Eth-Trunk 1</span><br><span class="line">[JR_SW6-Eth-Trunk1]port link-type trunk </span><br><span class="line">[JR_SW6-Eth-Trunk1]port trunk allow-pass vlan 3 900</span><br><span class="line">[JR_SW6-Eth-Trunk1]q</span><br><span class="line">[JR_SW6]</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HJ_SW3:</span><br><span class="line">[HJ_SW3]vlan batch 2 to 5  200 900</span><br><span class="line">[HJ_SW3]int e0/0/3</span><br><span class="line">[HJ_SW3-Ethernet0/0/3]port link-type trunk </span><br><span class="line">[HJ_SW3-Ethernet0/0/3]port trunk allow-pass vlan 2 900</span><br><span class="line">[HJ_SW3-Ethernet0/0/3]q</span><br><span class="line">[HJ_SW3]int Eth-Trunk 1</span><br><span class="line">[HJ_SW3-Eth-Trunk1]port link-type trunk </span><br><span class="line">[HJ_SW3-Eth-Trunk1]port trunk allow-pass vlan 3 900</span><br><span class="line">[HJ_SW3-Eth-Trunk1]qui</span><br><span class="line">[HJ_SW3]int e0/0/1</span><br><span class="line">[HJ_SW3-Ethernet0/0/1]port link-type trunk </span><br><span class="line">[HJ_SW3-Ethernet0/0/1]port trunk allow-pass vlan 2 to 3 900</span><br><span class="line">[HJ_SW3-Ethernet0/0/1]q</span><br><span class="line">[HJ_SW3]int e0/0/2</span><br><span class="line">[HJ_SW3-Ethernet0/0/2]port link-type trunk </span><br><span class="line">[HJ_SW3-Ethernet0/0/2]port trunk allow-pass vlan 2 to 3 900</span><br><span class="line">[HJ_SW3-Ethernet0/0/2]q</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    JR_SW7:</span><br><span class="line">&lt;Huawei&gt;sys </span><br><span class="line">[Huawei]un in en	</span><br><span class="line">[Huawei]sysname JR_SW7</span><br><span class="line">[JR_SW7]vlan batch 2 to 5 900</span><br><span class="line">[JR_SW7]int e0/0/2</span><br><span class="line">[JR_SW7-Ethernet0/0/2]port link-type access </span><br><span class="line">[JR_SW7-Ethernet0/0/2]port default vlan 4</span><br><span class="line">[JR_SW7-Ethernet0/0/2]int e0/0/3</span><br><span class="line">[JR_SW7-Ethernet0/0/3]port link-type access </span><br><span class="line">[JR_SW7-Ethernet0/0/3]port default vlan 5</span><br><span class="line">[JR_SW7-Ethernet0/0/3]int e0/0/1	</span><br><span class="line">[JR_SW7-Ethernet0/0/1]port link-type trunk </span><br><span class="line">[JR_SW7-Ethernet0/0/1]port trunk  allow-pass  vlan 4 5 900</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HJ_SW4:</span><br><span class="line">&lt;Huawei&gt;sys	</span><br><span class="line">[Huawei]sysname HJ_SW4</span><br><span class="line">[HJ_SW4]vlan batch 2 to 5 900</span><br><span class="line">[HJ_SW4]int e0/0/3</span><br><span class="line">[HJ_SW4-Ethernet0/0/3]port link-type trunk </span><br><span class="line">[HJ_SW4-Ethernet0/0/3]port trunk allow-pass vlan 4 5 900</span><br><span class="line">[HJ_SW4-Ethernet0/0/3]int e0/0/1</span><br><span class="line">[HJ_SW4-Ethernet0/0/1]port link-type trunk </span><br><span class="line">[HJ_SW4-Ethernet0/0/1]port trunk allow-pass vlan 4 to 5 900</span><br><span class="line">[HJ_SW4-Ethernet0/0/1]int e0/0/2</span><br><span class="line">[HJ_SW4-Ethernet0/0/2]port link-type trunk </span><br><span class="line">[HJ_SW4-Ethernet0/0/2]port trunk allow-pass vlan 4 to 5 900</span><br><span class="line">[HJ_SW4-Ethernet0/0/2]q</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    JR_SW8:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname JR_SW8	</span><br><span class="line">[JR_SW8]vlan batch 2 to 5 200 900</span><br><span class="line">[JR_SW8]int e0/0/3</span><br><span class="line">[JR_SW8-Ethernet0/0/3]port link-type access </span><br><span class="line">[JR_SW8-Ethernet0/0/3]port default vlan 200</span><br><span class="line">[JR_SW8-Ethernet0/0/3]int e0/0/4</span><br><span class="line">[JR_SW8-Ethernet0/0/4]port link-type access </span><br><span class="line">[JR_SW8-Ethernet0/0/4]port default vlan 200</span><br><span class="line">[JR_SW8-Ethernet0/0/4]q</span><br><span class="line">[JR_SW8]port-group g e 0/0/1 e 0/0/2   //打一个组批量配置e0/0/1和e/0/0/2</span><br><span class="line">[JR_SW8-port-group]port link-type trunk </span><br><span class="line">[JR_SW8-port-group]port trunk allow-pass vlan 200 900</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    XH_SW1:</span><br><span class="line">&lt;HX_SW1&gt;sy</span><br><span class="line">[HX_SW1]vlan batch 2 to 5 200 800 900</span><br><span class="line">[HX_SW1]int g0/0/5</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/5]port link-type trunk </span><br><span class="line">[HX_SW1-GigabitEthernet0/0/5]port trunk allow-pass vlan 200 900</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/5]dis this</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/5]int g0/0/1	</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/1]port link-type trunk </span><br><span class="line">[HX_SW1-GigabitEthernet0/0/1]port trunk allow-pass vlan 2 3 900</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/1]dis this</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/1]int g0/0/4</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/4]port link-type trunk </span><br><span class="line">[HX_SW1-GigabitEthernet0/0/4]port trunk allow-pass vlan 4 5 900</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/4]dis this</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/4]q</span><br><span class="line">[HX_SW1]int Eth-Trunk 2</span><br><span class="line">[HX_SW1-Eth-Trunk2]dis this</span><br><span class="line">[HX_SW1-Eth-Trunk2]port link-type trunk 	</span><br><span class="line">[HX_SW1-Eth-Trunk2]port trunk allow-pass vlan 2 3 4 5 200 900</span><br><span class="line">[HX_SW1-Eth-Trunk2]dis this</span><br><span class="line">[HX_SW1-Eth-Trunk2]int g0/0/6	</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/6]port link-type access </span><br><span class="line">[HX_SW1-GigabitEthernet0/0/6]port default vlan 800</span><br><span class="line">[HX_SW1-GigabitEthernet0/0/6]dis this</span><br><span class="line">------------------------------------</span><br></pre></td></tr></table></figure>

<h3 id="3、MSTP多生成树配置"><a href="#3、MSTP多生成树配置" class="headerlink" title="3、MSTP多生成树配置"></a>3、MSTP多生成树配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">	HX_SW1:</span><br><span class="line">[HX_SW1]stp region-configuration </span><br><span class="line">[HX_SW1-mst-region]instance 1 vlan 2 3 200</span><br><span class="line">[HX_SW1-mst-region]region-name aa</span><br><span class="line">[HX_SW1-mst-region]revision-level 1</span><br><span class="line">[HX_SW1-mst-region]instance 2 vlan 4 5</span><br><span class="line">[HX_SW1-mst-region]active region-configuration </span><br><span class="line">[HX_SW1-mst-region]dis this</span><br><span class="line">/*#所有汇聚、交换机以及服务器组交换机都需要配置一下命令(见以下配置)</span><br><span class="line">stp region-configuration</span><br><span class="line"> region-name aa</span><br><span class="line"> revision-level 1</span><br><span class="line"> instance 1 vlan 2 to 3 200</span><br><span class="line"> instance 2 vlan 4 to 5</span><br><span class="line"> active region-configuration</span><br><span class="line">#*/</span><br><span class="line">[HX_SW1]stp instance 1 root primary </span><br><span class="line">[HX_SW1]stp instance 2 root secondary </span><br><span class="line">[HX_SW1]dis this</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HX_SW2:</span><br><span class="line">[HX_SW2]stp region-configuration</span><br><span class="line">[HX_SW2-mst-region] region-name aa</span><br><span class="line">[HX_SW2-mst-region] revision-level 1</span><br><span class="line">[HX_SW2-mst-region] instance 1 vlan 2 to 3 200</span><br><span class="line">[HX_SW2-mst-region] instance 2 vlan 4 to 5</span><br><span class="line">[HX_SW2-mst-region] active region-configuration</span><br><span class="line">[HX_SW2-mst-region]qui</span><br><span class="line">[HX_SW2]stp instance 2 root primary </span><br><span class="line">[HX_SW2]stp instance 1 root secondary </span><br><span class="line">[HX_SW2]dis this</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">    JR_SW8:</span><br><span class="line">&lt;JR_SW8&gt;sy</span><br><span class="line">[JR_SW8]stp region-configuration</span><br><span class="line">[JR_SW8-mst-region] region-name aa</span><br><span class="line">[JR_SW8-mst-region] revision-level 1</span><br><span class="line">[JR_SW8-mst-region] instance 1 vlan 2 to 3 200</span><br><span class="line">[JR_SW8-mst-region] instance 2 vlan 4 to 5</span><br><span class="line">[JR_SW8-mst-region] active region-configuration</span><br><span class="line">Info: This operation may take a few seconds. Please wait for a moment...done.</span><br><span class="line">[JR_SW8-mst-region]q</span><br><span class="line">[JR_SW8]</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HJ_SW3:</span><br><span class="line">[HJ_SW3]stp region-configuration</span><br><span class="line">[HJ_SW3-mst-region] region-name aa</span><br><span class="line">[HJ_SW3-mst-region] revision-level 1</span><br><span class="line">[HJ_SW3-mst-region] instance 1 vlan 2 to 3 200</span><br><span class="line">[HJ_SW3-mst-region] instance 2 vlan 4 to 5</span><br><span class="line">[HJ_SW3-mst-region] active region-configuratio</span><br><span class="line">[HJ_SW3-mst-region]qui</span><br><span class="line">[HJ_SW3]dis stp br</span><br><span class="line"> MSTID  Port                        Role  STP State     Protection</span><br><span class="line">   1    Ethernet0/0/1               ROOT  FORWARDING      NONE</span><br><span class="line">   1    Ethernet0/0/2               ALTE  DISCARDING      NONE</span><br><span class="line">   1    Ethernet0/0/3               DESI  FORWARDING      NONE</span><br><span class="line">   1    Eth-Trunk1                  DESI  FORWARDING      NONE</span><br><span class="line">//发现e0/0/2是堵塞的</span><br><span class="line">------------------------------------</span><br><span class="line">    HJ_SW4:</span><br><span class="line">[HJ_SW4]stp region-configuration</span><br><span class="line">[HJ_SW4-mst-region] region-name aa</span><br><span class="line">[HJ_SW4-mst-region] revision-level 1</span><br><span class="line">[HJ_SW4-mst-region] instance 1 vlan 2 to 3 200</span><br><span class="line">[HJ_SW4-mst-region] instance 2 vlan 4 to 5</span><br><span class="line">[HJ_SW4-mst-region] active region-configuration</span><br><span class="line">[HJ_SW4-mst-region]q</span><br><span class="line">[HJ_SW4]dis stp br</span><br><span class="line"> MSTID  Port                        Role  STP State     Protection</span><br><span class="line">   2    Ethernet0/0/1               ROOT  FORWARDING      NONE</span><br><span class="line">   2    Ethernet0/0/2               ALTE  DISCARDING      NONE</span><br><span class="line">   2    Ethernet0/0/3               MAST  FORWARDING      NONE</span><br><span class="line">//发现e0/0/2是堵塞的</span><br></pre></td></tr></table></figure>

<h3 id="4、VRRP网关冗余配置"><a href="#4、VRRP网关冗余配置" class="headerlink" title="4、VRRP网关冗余配置"></a>4、VRRP网关冗余配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">	HX_SW1:</span><br><span class="line">[HX_SW1]int Vlanif 2</span><br><span class="line">[HX_SW1-Vlanif2]ip add 192.168.2.254 24</span><br><span class="line">[HX_SW1-Vlanif2]vrrp vrid 2 virtual-ip 192.168.2.1</span><br><span class="line">[HX_SW1-Vlanif2]vrrp vrid 2 priority 105</span><br><span class="line">[HX_SW1-Vlanif2]dis this</span><br><span class="line">[HX_SW1-Vlanif2]q</span><br><span class="line">[HX_SW1]int Vlanif 3</span><br><span class="line">[HX_SW1-Vlanif3]ip add 192.168.3.254 24</span><br><span class="line">[HX_SW1-Vlanif3]vrrp vrid 3 virtual-ip 192.168.3.1</span><br><span class="line">[HX_SW1-Vlanif3]vrrp vrid 3 priority 105</span><br><span class="line">[HX_SW1-Vlanif3]dis this</span><br><span class="line">[HX_SW1-Vlanif3]qui</span><br><span class="line">[HX_SW1]int Vlanif 200</span><br><span class="line">[HX_SW1-Vlanif200]ip add 192.168.200.254 24</span><br><span class="line">[HX_SW1-Vlanif200]vrrp vrid 200 virtual-ip 192.168.200.1</span><br><span class="line">[HX_SW1-Vlanif200]vrrp vrid 200 priority 105</span><br><span class="line">[HX_SW1-Vlanif200]qui</span><br><span class="line">[HX_SW1]int Vlanif 4</span><br><span class="line">[HX_SW1-Vlanif4]ip add 192.168.4.254 24</span><br><span class="line">[HX_SW1-Vlanif4]vrrp vrid 4 virtual-ip 192.168.4.1</span><br><span class="line">[HX_SW1-Vlanif4]q</span><br><span class="line">[HX_SW1]int Vlanif 5</span><br><span class="line">[HX_SW1-Vlanif5]ip add 192.168.5.254 24</span><br><span class="line">[HX_SW1-Vlanif5]vrrp vrid 5 virtual-ip 192.168.5.1</span><br><span class="line">[HX_SW1-Vlanif5]q</span><br><span class="line">[HX_SW1]int Vlanif 800</span><br><span class="line">[HX_SW1-Vlanif800]ip add 192.168.12.2 24</span><br><span class="line">[HX_SW1-Vlanif800]q</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HX_SW2:</span><br><span class="line">[HX_SW2]int Vlanif 4</span><br><span class="line">[HX_SW2-Vlanif4]ip add 192.168.4.253 24</span><br><span class="line">[HX_SW2-Vlanif4]vrrp vrid 4 virtual-ip 192.168.4.1</span><br><span class="line">[HX_SW2-Vlanif4]vrrp vrid 4 priority 105</span><br><span class="line">[HX_SW2-Vlanif4]q</span><br><span class="line">[HX_SW2]int vlanif 5</span><br><span class="line">[HX_SW2-Vlanif5]ip add 192.168.5.253 24</span><br><span class="line">[HX_SW2-Vlanif5]vrrp vrid 5 virtual-ip 192.168.5.1</span><br><span class="line">[HX_SW2-Vlanif5]vrrp vrid 5 priority 105</span><br><span class="line">[HX_SW2-Vlanif5]q</span><br><span class="line">[HX_SW2]int vlanif 2</span><br><span class="line">[HX_SW2-Vlanif2]ip add 192.168.2.253 24</span><br><span class="line">[HX_SW2-Vlanif2]vrrp vrid 2 virtual-ip 192.168.2.1</span><br><span class="line">[HX_SW2-Vlanif2]q</span><br><span class="line">[HX_SW2]int vlanif 3</span><br><span class="line">[HX_SW2-Vlanif3]ip add 192.168.3.253 24</span><br><span class="line">[HX_SW2-Vlanif3]vrrp vrid 3 virtual-ip 192.168.3.1</span><br><span class="line">[HX_SW2-Vlanif3]dis this</span><br><span class="line">[HX_SW2-Vlanif3]q</span><br><span class="line">[HX_SW2]int vlanif 200</span><br><span class="line">[HX_SW2-Vlanif200]ip add 192.168.200.253 24</span><br><span class="line">[HX_SW2-Vlanif200]vrrp vrid 200 virtual-ip 192.168.200.1</span><br><span class="line">[HX_SW2-Vlanif200]q</span><br><span class="line">[HX_SW2]int Vlanif 801</span><br><span class="line">[HX_SW2-Vlanif801]ip add 192.168.23.2 24</span><br><span class="line">[HX_SW2-Vlanif801]q</span><br><span class="line">------------------------------------</span><br></pre></td></tr></table></figure>

<h3 id="5、验证VRRP网关冗余的配置"><a href="#5、验证VRRP网关冗余的配置" class="headerlink" title="5、验证VRRP网关冗余的配置"></a>5、验证VRRP网关冗余的配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">    HX_SW1:</span><br><span class="line">&lt;HX_SW1&gt;dis vrrp brief </span><br><span class="line">VRID  State        Interface                Type     Virtual IP     </span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">2     Master       Vlanif2                  Normal   192.168.2.1    </span><br><span class="line">3     Master       Vlanif3                  Normal   192.168.3.1    </span><br><span class="line">4     Backup       Vlanif4                  Normal   192.168.4.1    </span><br><span class="line">5     Backup       Vlanif5                  Normal   192.168.5.1    </span><br><span class="line">200   Master       Vlanif200                Normal   192.168.200.1  </span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Total:5     Master:3     Backup:2     Non-active:0     </span><br><span class="line">&lt;HX_SW1&gt;</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HX_SW2:</span><br><span class="line">&lt;HX_SW2&gt;dis vrrp brief </span><br><span class="line">VRID  State        Interface                Type     Virtual IP     </span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">2     Backup       Vlanif2                  Normal   192.168.2.1    </span><br><span class="line">3     Backup       Vlanif3                  Normal   192.168.3.1    </span><br><span class="line">4     Master       Vlanif4                  Normal   192.168.4.1    </span><br><span class="line">5     Master       Vlanif5                  Normal   192.168.5.1    </span><br><span class="line">200   Backup       Vlanif200                Normal   192.168.200.1  </span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Total:5     Master:2     Backup:3     Non-active:0     </span><br><span class="line">&lt;HX_SW2&gt;   </span><br><span class="line">/*手动给PC配置IP地址访问网关，如给vlan3下的PC配置</span><br><span class="line">    IP：192.168.3.3</span><br><span class="line">    GW：192.168.3.1  测试访问网关，ping 192.168.3.1通了即可*/</span><br></pre></td></tr></table></figure>

<p>手动给PC配置IP地址访问网关，如给vlan3下的PC配置<br>IP：192.168.3.3<br>GW：192.168.3.1 </p>
<p>测试访问网关，ping 192.168.3.1通了即可 </p>
<h3 id="6、BFD路由联动"><a href="#6、BFD路由联动" class="headerlink" title="6、BFD路由联动"></a>6、BFD路由联动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">	HX_SW1:</span><br><span class="line">[HX_SW1]bfd</span><br><span class="line">[HX_SW1-bfd]qui//进去退出来</span><br><span class="line">[HX_SW1]bfd test1 bind peer-ip 192.168.12.1 source-ip 192.168.12.2 auto</span><br><span class="line">//如果需要删除bfd的命令就是undo bfd test1</span><br><span class="line">[HX_SW1-bfd-session-test1]commit </span><br><span class="line">[HX_SW1-bfd-session-test1]qui</span><br><span class="line">[HX_SW1]dis bfd session all</span><br><span class="line">Local Remote     PeerIpAddr      State     Type        InterfaceName            </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">8192  8192       192.168.12.1    Up        S_AUTO_PEER       -                  </span><br><span class="line">[HX_SW1]int Vlanif 2</span><br><span class="line">[HX_SW1-Vlanif2]vrrp vrid 2 track bfd-session session-name test1</span><br><span class="line">[HX_SW1-Vlanif2]vrrp vrid 2 track int g0/0/1</span><br><span class="line">[HX_SW1-Vlanif2]dis this</span><br><span class="line">#</span><br><span class="line">interface Vlanif2</span><br><span class="line"> ip address 192.168.2.254 255.255.255.0</span><br><span class="line"> vrrp vrid 2 virtual-ip 192.168.2.1</span><br><span class="line"> vrrp vrid 2 priority 105</span><br><span class="line"> vrrp vrid 2 track interface GigabitEthernet0/0/1</span><br><span class="line"> vrrp vrid 2 track bfd-session session-name test1</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[HX_SW1-Vlanif2]q</span><br><span class="line">[HX_SW1]int vlanif 3</span><br><span class="line">[HX_SW1-Vlanif3]vrrp vrid 3 track bfd-session session-name test1</span><br><span class="line">[HX_SW1-Vlanif3]vrrp vrid 3 track int g0/0/1</span><br><span class="line">[HX_SW1-Vlanif3]q</span><br><span class="line">[HX_SW1]int vlan 200</span><br><span class="line">[HX_SW1-Vlanif200]vrrp vrid 200 track bfd-session session-name test1</span><br><span class="line">[HX_SW1-Vlanif200]vrrp vrid 200 track int g0/0/1</span><br><span class="line">[HX_SW1-Vlanif200]</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    R1:</span><br><span class="line">&lt;Huawei&gt;sys</span><br><span class="line">[Huawei]sysname R1</span><br><span class="line">[R1]un in en</span><br><span class="line">[R1]bfd </span><br><span class="line">[R1-bfd]q </span><br><span class="line">[R1]int g0/0/0</span><br><span class="line">[R1-GigabitEthernet0/0/0]ip add 192.168.12.1 24</span><br><span class="line">[R1-GigabitEthernet0/0/0]int g0/0/1</span><br><span class="line">[R1-GigabitEthernet0/0/1]ip add 192.168.23.1 24</span><br><span class="line">[R1-GigabitEthernet0/0/1]int g0/0/2</span><br><span class="line">[R1-GigabitEthernet0/0/2]ip add 12.1.1.1 24</span><br><span class="line">[R1-GigabitEthernet0/0/2]int g1/0/0</span><br><span class="line">[R1-GigabitEthernet1/0/0]ip add 13.1.1.1 24</span><br><span class="line">[R1-GigabitEthernet1/0/0]int g2/0/0</span><br><span class="line">[R1-GigabitEthernet2/0/0]ip add 14.1.1.1 24</span><br><span class="line">[R1-GigabitEthernet2/0/0]qui</span><br><span class="line">[R1]bfd test1 bind peer-ip 192.168.12.2 source-ip 192.168.12.1 auto</span><br><span class="line">[R1-bfd-session-test1]commit </span><br><span class="line">[R1-bfd-session-test1]qui</span><br><span class="line">[R1]bfd test1</span><br><span class="line">[R1-bfd-session-test1]dis this</span><br><span class="line">[V200R003C00]</span><br><span class="line">#</span><br><span class="line">bfd test1 bind peer-ip 192.168.12.2 source-ip 192.168.12.1 auto</span><br><span class="line"> commit</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[R1-bfd-session-test1]qui</span><br><span class="line">[R1]bfd test2 bind peer-ip 192.168.23.2 source-ip 192.168.23.1 auto </span><br><span class="line">[R1-bfd-session-test2]commit</span><br><span class="line">[R1-bfd-session-test2]dis this</span><br><span class="line">[V200R003C00]</span><br><span class="line">#</span><br><span class="line">bfd test2 bind peer-ip 192.168.23.2 source-ip 192.168.23.1 auto</span><br><span class="line"> commit</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[R1-bfd-session-test2]return</span><br><span class="line">&lt;R1&gt;dis bfd session all</span><br><span class="line">Local Remote     PeerIpAddr      State     Type        InterfaceName            </span><br><span class="line">8193  8192       192.168.23.2    Up        S_AUTO_PEER       -                  </span><br><span class="line">8194  8192       192.168.12.2    Up        S_AUTO_PEER       -                  </span><br><span class="line">&lt;R1&gt;</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">    HX_SW2:</span><br><span class="line">[HX_SW2]bfd</span><br><span class="line">[HX_SW2-bfd]q</span><br><span class="line">[HX_SW2]bfd test2 bind peer-ip 192.168.23.1 source-ip 192.168.23.2 auto 	</span><br><span class="line">[HX_SW2-bfd-session-test2]commit </span><br><span class="line">[HX_SW2-bfd-session-test2]dis this</span><br><span class="line">#</span><br><span class="line">bfd test2 bind peer-ip 192.168.23.1 source-ip 192.168.23.2 auto</span><br><span class="line"> commit</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[HX_SW2-bfd-session-test2]q</span><br><span class="line">[HX_SW2]</span><br><span class="line">[HX_SW2]dis bfd session  all</span><br><span class="line">[HX_SW2]int vlanif 4</span><br><span class="line">[HX_SW2-Vlanif4]vrrp vrid 4 track bfd-session session-name test2</span><br><span class="line">[HX_SW2-Vlanif4]vrrp vrid 4 track int g0/0/4</span><br><span class="line">[HX_SW2-Vlanif4]q</span><br><span class="line">[HX_SW2]int vlan 5</span><br><span class="line">[HX_SW2-Vlanif5]vrrp vrid 5 track int g0/0/4</span><br><span class="line">[HX_SW2-Vlanif5]vrrp vrid 5 track bfd-session session-name test2</span><br><span class="line">[HX_SW2-Vlanif5]qui</span><br><span class="line">[HX_SW2] </span><br></pre></td></tr></table></figure>

<h3 id="7、OSPF配置"><a href="#7、OSPF配置" class="headerlink" title="7、OSPF配置"></a>7、OSPF配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">	HX_SW1:</span><br><span class="line">[HX_SW1]ospf 1</span><br><span class="line">[HX_SW1-ospf-1]area 0</span><br><span class="line">[HX_SW1-ospf-1-area-0.0.0.0]net 192.168.2.0 0.0.0.255</span><br><span class="line">[HX_SW1-ospf-1-area-0.0.0.0]net 192.168.3.0 0.0.0.255</span><br><span class="line">[HX_SW1-ospf-1-area-0.0.0.0]net 192.168.4.0 0.0.0.255</span><br><span class="line">[HX_SW1-ospf-1-area-0.0.0.0]net 192.168.5.0 0.0.0.255</span><br><span class="line">[HX_SW1-ospf-1-area-0.0.0.0]net 192.168.200.0 0.0.0.255</span><br><span class="line">[HX_SW1-ospf-1-area-0.0.0.0]net 192.168.12.0 0.0.0.255</span><br><span class="line">------------------------------------</span><br><span class="line">    HX_SW2:</span><br><span class="line">[HX_SW2]ospf 1</span><br><span class="line">[HX_SW2-ospf-1]area 0</span><br><span class="line">[HX_SW2-ospf-1-area-0.0.0.0]net 192.168.2.0 0.0.0.255</span><br><span class="line">[HX_SW2-ospf-1-area-0.0.0.0]net 192.168.3.0 0.0.0.255</span><br><span class="line">[HX_SW2-ospf-1-area-0.0.0.0]net 192.168.4.0 0.0.0.255</span><br><span class="line">[HX_SW2-ospf-1-area-0.0.0.0]net 192.168.5.0 0.0.0.255</span><br><span class="line">[HX_SW2-ospf-1-area-0.0.0.0]net 192.168.200.0 0.0.0.255</span><br><span class="line">[HX_SW2-ospf-1-area-0.0.0.0]net 192.168.23.0 0.0.0.255</span><br><span class="line">------------------------------------</span><br><span class="line">//配置相应的路由器接口IP地址配置</span><br><span class="line">    LT_R3:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]sysname LT_R3</span><br><span class="line">[LT_R3]un in en</span><br><span class="line">[LT_R3]int g0/0/0</span><br><span class="line">[LT_R3-GigabitEthernet0/0/0]q</span><br><span class="line">[LT_R3]int e0/0/0</span><br><span class="line">[LT_R3-Ethernet0/0/0]ip add 13.1.1.2 24</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">    FZ_R4:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname FZ_R4</span><br><span class="line">[FZ_R4]int e0/0/0</span><br><span class="line">[FZ_R4-Ethernet0/0/0]ip add 14.1.1.2 24</span><br><span class="line">[FZ_R4-Ethernet0/0/0]q</span><br><span class="line">[FZ_R4]int e0/0/1</span><br><span class="line">[FZ_R4-Ethernet0/0/1]ip add 192.168.100.1 24</span><br><span class="line">[FZ_R4-Ethernet0/0/1]q	</span><br><span class="line">[FZ_R4]ospf 1</span><br><span class="line">[FZ_R4-ospf-1]area 0</span><br><span class="line">[FZ_R4-ospf-1-area-0.0.0.0]net 14.1.1.0 0.0.0.255</span><br><span class="line">[FZ_R4-ospf-1-area-0.0.0.0]net 192.168.100.0 0.0.0.255</span><br><span class="line">[FZ_R4-ospf-1-area-0.0.0.0]qui</span><br><span class="line">[FZ_R4-ospf-1]qui</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    R1:</span><br><span class="line">&lt;R1&gt;sy</span><br><span class="line">[R1]int g0/0/2</span><br><span class="line">[R1-GigabitEthernet0/0/2]dis this</span><br><span class="line">[V200R003C00]</span><br><span class="line">#</span><br><span class="line">interface GigabitEthernet0/0/2</span><br><span class="line"> ip address 12.1.1.1 255.255.255.0 </span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[R1-GigabitEthernet0/0/2]undo ip address 12.1.1.1 255.255.255.0  //这接口要做PPPOE用就不配地址了</span><br><span class="line">[R1-GigabitEthernet0/0/2]qui</span><br><span class="line">/*[R1]dis ip int br</span><br><span class="line">Interface                         IP Address/Mask      Physical   Protocol  </span><br><span class="line">GigabitEthernet0/0/0              192.168.12.1/24      up         up        </span><br><span class="line">GigabitEthernet0/0/1              192.168.23.1/24      up         up        </span><br><span class="line">GigabitEthernet0/0/2              unassigned           up         down      </span><br><span class="line">GigabitEthernet1/0/0              13.1.1.1/24          up         up        </span><br><span class="line">GigabitEthernet2/0/0              14.1.1.1/24          up         up        </span><br><span class="line">GigabitEthernet3/0/0              unassigned           down       down      </span><br><span class="line">GigabitEthernet4/0/0              unassigned           down       down      </span><br><span class="line">NULL0                             unassigned           up         up(s)     </span><br><span class="line">[R1]*/</span><br><span class="line">[R1]ospf 1</span><br><span class="line">[R1-ospf-1]area 0</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]net 192.168.12.0 0.0.0.255</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]net 192.168.12.0 0.0.0.255</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]net 192.168.23.0 0.0.0.255</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]net 14.1.1.0 0.0.0.255</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]dis this</span><br><span class="line">------------------------------------</span><br><span class="line">    DHCP：</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]sysname DHCP</span><br><span class="line">[DHCP]un in en</span><br><span class="line">[DHCP]int e0/0/0</span><br><span class="line">[DHCP-Ethernet0/0/0]ip add 192.168.200.3 24</span><br><span class="line">[DHCP-Ethernet0/0/0]qui</span><br><span class="line">[DHCP]ip route-static 0.0.0.0 0  192.168.200.1//再来一条缺省路由</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">检测：</span><br><span class="line">    FZ_R4:</span><br><span class="line">[FZ_R4]dis ip routing-table //能学到以下的几个网段就说明配置完成了</span><br><span class="line">Destination/Mask    Proto   Pre  Cost      Flags NextHop         Interface</span><br><span class="line">       14.1.1.0/24  Direct  0    0           D   14.1.1.2        Ethernet0/0/0</span><br><span class="line">       14.1.1.2/32  Direct  0    0           D   127.0.0.1       Ethernet0/0/0</span><br><span class="line">      127.0.0.0/8   Direct  0    0           D   127.0.0.1       InLoopBack0</span><br><span class="line">      127.0.0.1/32  Direct  0    0           D   127.0.0.1       InLoopBack0</span><br><span class="line">    192.168.2.0/24  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">    192.168.2.1/32  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">    192.168.3.0/24  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">    192.168.3.1/32  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">    192.168.4.0/24  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">    192.168.4.1/32  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">    192.168.5.0/24  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">    192.168.5.1/32  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">   192.168.12.0/24  OSPF    10   2           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">   192.168.23.0/24  OSPF    10   2           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">  192.168.100.0/24  Direct  0    0           D   192.168.100.1   Ethernet0/0/1</span><br><span class="line">  192.168.100.1/32  Direct  0    0           D   127.0.0.1       Ethernet0/0/1</span><br><span class="line">  192.168.200.0/24  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">  192.168.200.1/32  OSPF    10   3           D   14.1.1.1        Ethernet0/0/0</span><br><span class="line">------------------------------------</span><br><span class="line">    这时PC通过ping 192.168.100.2就可以通</span><br><span class="line">    这时PC通过ping 192.168.200.2也可以通</span><br><span class="line">    这时PC通过ping 192.168.200.3也可以通</span><br><span class="line">    分支去访问总部服务器也可以通</span><br></pre></td></tr></table></figure>

<h3 id="8、RIP协议配置"><a href="#8、RIP协议配置" class="headerlink" title="8、RIP协议配置"></a>8、RIP协议配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">	DX_R2:</span><br><span class="line">&lt;DX_R2&gt;syS</span><br><span class="line">[DX_R2]int g0/0/1</span><br><span class="line">[DX_R2-GigabitEthernet0/0/1]ip add 25.1.1.2 24</span><br><span class="line">[DX_R2-GigabitEthernet0/0/1]q</span><br><span class="line">[DX_R2]rip	</span><br><span class="line">[DX_R2-rip-1]version 2 //用版本2</span><br><span class="line">[DX_R2-rip-1]net 12.0.0.0</span><br><span class="line">[DX_R2-rip-1]net 25.0.0.0</span><br><span class="line">------------------------------------</span><br><span class="line">    LT_R3:</span><br><span class="line">&lt;LT_R3&gt;sy</span><br><span class="line">[LT_R3]int e0/0/1</span><br><span class="line">[LT_R3-Ethernet0/0/1]ip add 35.1.1.1 24</span><br><span class="line">[LT_R3-Ethernet0/0/1]ip add 35.1.1.3 24</span><br><span class="line">[LT_R3-Ethernet0/0/1]qui</span><br><span class="line">[LT_R3]dis ip int br</span><br><span class="line">/*Interface                         IP Address/Mask      Physical   Protocol  </span><br><span class="line">Ethernet0/0/0                     13.1.1.2/24          up         up        </span><br><span class="line">Ethernet0/0/1                     35.1.1.3/24          up         up           </span><br><span class="line">Serial0/0/3                       unassigned           down       down    */  </span><br><span class="line">[LT_R3]rip </span><br><span class="line">[LT_R3-rip-1]version  2</span><br><span class="line">[LT_R3-rip-1]net 13.0.0.0</span><br><span class="line">[LT_R3-rip-1]net 35.0.0.0</span><br><span class="line">[LT_R3-rip-1]qui</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    R5:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname R5</span><br><span class="line">[R5]int e0/0/0</span><br><span class="line">[R5-Ethernet0/0/0]ip add 25.1.1.5 24</span><br><span class="line">[R5-Ethernet0/0/0]int e0/0/1</span><br><span class="line">[R5-Ethernet0/0/1]ip add 35.1.1.5 24</span><br><span class="line">[R5-Ethernet0/0/1]q</span><br><span class="line">[R5]int LoopBack 0</span><br><span class="line">[R5-LoopBack0]ip add 5.5.5.5 24</span><br><span class="line">[R5-LoopBack0]dis ip int br</span><br><span class="line">/*Interface                         IP Address/Mask      Physical   Protocol  </span><br><span class="line">Ethernet0/0/0                     25.1.1.5/24          up         up        </span><br><span class="line">Ethernet0/0/1                     35.1.1.5/24          up         up           </span><br><span class="line">GigabitEthernet0/0/3              unassigned           down       down      </span><br><span class="line">LoopBack0                         5.5.5.5/24           up         up(s)      </span><br><span class="line">Serial0/0/3                       unassigned           down       down    */  </span><br><span class="line">[R5-LoopBack0]qui</span><br><span class="line">[R5]rip</span><br><span class="line">[R5-rip-1]version 2</span><br><span class="line">[R5-rip-1]net 25.0.0.0</span><br><span class="line">[R5-rip-1]net 35.0.0.0</span><br><span class="line">[R5-rip-1]net 5.0.0.0</span><br><span class="line">	</span><br><span class="line">测试：R2这个时候就已经可以访问 5.5.5.5了</span><br></pre></td></tr></table></figure>

<h3 id="9、NAT转换配置-走联通的-电信做PPPoE"><a href="#9、NAT转换配置-走联通的-电信做PPPoE" class="headerlink" title="9、NAT转换配置(走联通的,电信做PPPoE)"></a>9、NAT转换配置(走联通的,电信做PPPoE)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">	HX_SW1:</span><br><span class="line">[HX_SW1]ip route-static 0.0.0.0 0 192.168.12.1</span><br><span class="line">[HX_SW1]ip route-static 0.0.0.0 0 192.168.23.1 preference 65</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HX_SW2:</span><br><span class="line">[HX_SW2]ip route-static 0.0.0.0 0 192.168.23.1</span><br><span class="line">[HX_SW2]ip route-static 0.0.0.0 0 192.168.12.1 preference 65</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    R1:</span><br><span class="line"></span><br><span class="line">[R1]ip route-static 0.0.0.0 0 13.1.1.2 description liantong</span><br><span class="line">[R1]acl 2000</span><br><span class="line">[R1-acl-basic-2000]rule permit source 192.168.0.0 0.0.255.255</span><br><span class="line">[R1-acl-basic-2000]int g1/0/0</span><br><span class="line">[R1-GigabitEthernet1/0/0]nat outbound 2000</span><br><span class="line">[R1-GigabitEthernet1/0/0]dis this</span><br><span class="line">//PC是可以访问百度和分支的了，也可以这种验证PC&gt;tracert 5.5.5.5</span><br><span class="line">/*PC&gt;tracert 5.5.5.5</span><br><span class="line">traceroute to 5.5.5.5, 8 hops max</span><br><span class="line">(ICMP), press Ctrl+C to stop</span><br><span class="line"> 1  192.168.3.254   93 ms  110 ms  62 ms</span><br><span class="line"> 2    *  *  *</span><br><span class="line"> 3  13.1.1.2   219 ms  78 ms  125 ms</span><br><span class="line"> 4  5.5.5.5   156 ms  141 ms  141 ms</span><br><span class="line">*/</span><br><span class="line">    </span><br><span class="line">ospf开销调整：</span><br><span class="line">    SW1:</span><br><span class="line">[HX_SW1]int vlanif 4</span><br><span class="line">[HX_SW1-Vlanif4]ospf cost 4</span><br><span class="line">[HX_SW1-Vlanif4]int vlanif 5</span><br><span class="line">[HX_SW1-Vlanif5]ospf cost 4</span><br><span class="line">[HX_SW1-Vlanif5]qui</span><br><span class="line"></span><br><span class="line">    SW2:</span><br><span class="line">[HX_SW2]int vlanif 2</span><br><span class="line">[HX_SW2-Vlanif2]ospf cost 4</span><br><span class="line">[HX_SW2-Vlanif2]int vlanif 3</span><br><span class="line">[HX_SW2-Vlanif3]ospf cost 4</span><br><span class="line">[HX_SW2-Vlanif3]int vlanif 200	</span><br><span class="line">[HX_SW2-Vlanif200]ospf cost 4</span><br><span class="line">[HX_SW2-Vlanif200]qui</span><br><span class="line">//这个时候就已经可以验证冗余性了，一直ping 5.5.5.5,断线验证，能切换就说明就可以了</span><br></pre></td></tr></table></figure>

<h3 id="10、DHCP中继"><a href="#10、DHCP中继" class="headerlink" title="10、DHCP中继"></a>10、DHCP中继</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">	DHCP：</span><br><span class="line">&lt;DHCP&gt;sy</span><br><span class="line">[DHCP]dhcp enable </span><br><span class="line">[DHCP]ip pool vlan2</span><br><span class="line">[DHCP-ip-pool-vlan2]network 192.168.2.0 mask 24</span><br><span class="line">[DHCP-ip-pool-vlan2]gateway-list 192.168.2.1</span><br><span class="line">[DHCP-ip-pool-vlan2]dns-list 114.114.114.114 8.8.8.8</span><br><span class="line">[DHCP-ip-pool-vlan2]excluded-ip-address 192.168.2.250 192.168.2.254</span><br><span class="line">[DHCP-ip-pool-vlan2]dis this</span><br><span class="line">#</span><br><span class="line">ip pool vlan2</span><br><span class="line"> gateway-list 192.168.2.1</span><br><span class="line"> network 192.168.2.0 mask 255.255.255.0</span><br><span class="line"> excluded-ip-address 192.168.2.250 192.168.2.254</span><br><span class="line"> dns-list 114.114.114.114 8.8.8.8</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[DHCP-ip-pool-vlan2]q</span><br><span class="line">[DHCP]ip pool vlan3</span><br><span class="line">[DHCP-ip-pool-vlan3] gateway-list 192.168.3.1</span><br><span class="line">[DHCP-ip-pool-vlan3] network 192.168.3.0 mask 255.255.255.0</span><br><span class="line">[DHCP-ip-pool-vlan3] dns-list 114.114.114.114 8.8.8.8</span><br><span class="line">[DHCP-ip-pool-vlan3]excluded-ip-address 192.168.3.250 192.168.3.254</span><br><span class="line">[DHCP-ip-pool-vlan3]q</span><br><span class="line">[DHCP]ip pool vlan4</span><br><span class="line">[DHCP-ip-pool-vlan4] gateway-list 192.168.4.1</span><br><span class="line">[DHCP-ip-pool-vlan4] network 192.168.4.0 mask 255.255.255.0</span><br><span class="line">[DHCP-ip-pool-vlan4] dns-list 114.114.114.114 8.8.8.8</span><br><span class="line">[DHCP-ip-pool-vlan4]excluded-ip-address 192.168.4.250 192.168.4.254</span><br><span class="line">[DHCP-ip-pool-vlan4]q</span><br><span class="line">[DHCP]ip pool vlan5</span><br><span class="line">[DHCP-ip-pool-vlan5] gateway-list 192.168.5.1</span><br><span class="line">[DHCP-ip-pool-vlan5] network 192.168.5.0 mask 255.255.255.0</span><br><span class="line">[DHCP-ip-pool-vlan5] dns-list 114.114.114.114 8.8.8.8</span><br><span class="line">[DHCP-ip-pool-vlan5]excluded-ip-address 192.168.5.250 192.168.5.254</span><br><span class="line">[DHCP-ip-pool-vlan5]dis this</span><br><span class="line">#</span><br><span class="line">ip pool vlan5</span><br><span class="line"> gateway-list 192.168.5.1</span><br><span class="line"> network 192.168.5.0 mask 255.255.255.0</span><br><span class="line"> excluded-ip-address 192.168.5.250 192.168.5.254</span><br><span class="line"> dns-list 114.114.114.114 8.8.8.8</span><br><span class="line">#</span><br><span class="line">return    </span><br><span class="line">[DHCP-ip-pool-vlan5]q</span><br><span class="line">[DHCP]int e0/0/0</span><br><span class="line">[DHCP-Ethernet0/0/0]dhcp select global </span><br><span class="line">[DHCP-Ethernet0/0/0]dis this</span><br><span class="line">[DHCP-Ethernet0/0/0]qui</span><br><span class="line">------------------------------------</span><br><span class="line">        </span><br><span class="line">    HX_SW1:</span><br><span class="line">[HX_SW1]dhcp enable </span><br><span class="line">[HX_SW1]int vlanif2</span><br><span class="line">[HX_SW1-Vlanif2]dhcp select relay </span><br><span class="line">[HX_SW1-Vlanif2]dhcp relay server-ip 192.168.200.3</span><br><span class="line">[HX_SW1-Vlanif2]dis this</span><br><span class="line">[HX_SW1-Vlanif2]int vlanif3</span><br><span class="line">[HX_SW1-Vlanif3]dhcp select relay 	</span><br><span class="line">[HX_SW1-Vlanif3]dhcp relay server-ip 192.168.200.3</span><br><span class="line">[HX_SW1-Vlanif3]int vlanif4	</span><br><span class="line">[HX_SW1-Vlanif4]dhcp select relay </span><br><span class="line">[HX_SW1-Vlanif4]dhcp relay server-ip 192.168.200.3</span><br><span class="line">[HX_SW1-Vlanif4]int vlanif5</span><br><span class="line">[HX_SW1-Vlanif5]dhcp select relay</span><br><span class="line">[HX_SW1-Vlanif5]dhcp relay server-ip 192.168.200.3</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">    HX_SW2:</span><br><span class="line">[HX_SW2]dhcp enable </span><br><span class="line">[HX_SW2]int vlanif2</span><br><span class="line">[HX_SW2-Vlanif2] dhcp select relay</span><br><span class="line">[HX_SW2-Vlanif2] dhcp relay server-ip 192.168.200.3</span><br><span class="line">[HX_SW2-Vlanif2]int vlan3</span><br><span class="line">[HX_SW2-Vlanif3] dhcp select relay</span><br><span class="line">[HX_SW2-Vlanif3] dhcp relay server-ip 192.168.200.3</span><br><span class="line">[HX_SW2-Vlanif3]int vlan4</span><br><span class="line">[HX_SW2-Vlanif4] dhcp select relay</span><br><span class="line">[HX_SW2-Vlanif4] dhcp relay server-ip 192.168.200.3</span><br><span class="line">[HX_SW2-Vlanif4]int vlanif 5</span><br><span class="line">[HX_SW2-Vlanif5] dhcp select relay</span><br><span class="line">[HX_SW2-Vlanif5] dhcp relay server-ip 192.168.200.3</span><br></pre></td></tr></table></figure>

<h3 id="11、PPPoE点对点配置"><a href="#11、PPPoE点对点配置" class="headerlink" title="11、PPPoE点对点配置"></a>11、PPPoE点对点配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">	JR_SW5:</span><br><span class="line">[JR_SW5]dhcp enable </span><br><span class="line">[JR_SW5]dhcp snooping  enable </span><br><span class="line">[JR_SW5]vlan 2</span><br><span class="line">[JR_SW5-vlan2]dhcp snooping enable </span><br><span class="line">[JR_SW5-vlan2]q</span><br><span class="line">[JR_SW5]int e0/0/1</span><br><span class="line">[JR_SW5-Ethernet0/0/1]dhcp snooping trusted </span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    JR_SW6:</span><br><span class="line">[JR_SW6]dhcp enable 	</span><br><span class="line">[JR_SW6]dhcp snooping enable </span><br><span class="line">[JR_SW6]vlan 3</span><br><span class="line">[JR_SW6-vlan3]dhcp snooping enable </span><br><span class="line">[JR_SW6-vlan3]q</span><br><span class="line">[JR_SW6]int Eth-Trunk 1</span><br><span class="line">[JR_SW6-Eth-Trunk1]dhcp snooping trusted </span><br><span class="line">[JR_SW6-Eth-Trunk1]dis this</span><br><span class="line">#</span><br><span class="line">interface Eth-Trunk1</span><br><span class="line"> port link-type trunk</span><br><span class="line"> port trunk allow-pass vlan 3 900</span><br><span class="line"> mode lacp-static</span><br><span class="line"> dhcp snooping trusted</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[JR_SW6-Eth-Trunk1]q</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    JR_SW7:</span><br><span class="line">[JR_SW7]dhcp enable</span><br><span class="line">[JR_SW7]dhcp snooping enable</span><br><span class="line">[JR_SW7]vlan 4</span><br><span class="line">[JR_SW7-vlan4]dhcp snooping enable </span><br><span class="line">[JR_SW7-vlan4]vlan 5</span><br><span class="line">[JR_SW7-vlan5]dhcp snooping enable</span><br><span class="line">[JR_SW7-vlan5]int e0/0/1</span><br><span class="line">[JR_SW7-Ethernet0/0/1]dhcp snooping trusted</span><br><span class="line">[JR_SW7-Ethernet0/0/1]dis this</span><br><span class="line">#</span><br><span class="line">interface Ethernet0/0/1</span><br><span class="line"> port link-type trunk</span><br><span class="line"> port trunk allow-pass vlan 4 to 5 900</span><br><span class="line"> dhcp snooping trusted</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[JR_SW7-Ethernet0/0/1]q</span><br><span class="line">//这个时候可以改一下PC的MAC地址输入ipconfig看看能不能获取得到地址</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    R1:</span><br><span class="line">[R1]acl 2001</span><br><span class="line">[R1-acl-basic-2001]rule permit source 192.168.0.0 0.0.255.255	</span><br><span class="line">[R1-acl-basic-2001]qui</span><br><span class="line">[R1]interface Dialer 1  //pppoe虚拟接口</span><br><span class="line">[R1-Dialer1]link-protocol ppp </span><br><span class="line">[R1-Dialer1]ip address ppp-negotiate  //通过ppp协商阶段获取地址</span><br><span class="line">[R1-Dialer1]ppp pap local-user 5555 password simple 123456</span><br><span class="line">[R1-Dialer1]dialer user 5555 //和pppoe 服务器的名字保持一致</span><br><span class="line">[R1-Dialer1]dialer bundle 2  </span><br><span class="line">[R1-Dialer1]nat outbound 2001</span><br><span class="line">[R1-Dialer1]qui</span><br><span class="line">[R1]int g0/0/2</span><br><span class="line">[R1-GigabitEthernet0/0/2]pppoe-client dial-bundle-number 2//将g0/0/1和dialer 1口进行绑定关联 on-demand就是不触发拨号(pppoe-client dial-bundle-number 2 on-demand)</span><br><span class="line">[R1-GigabitEthernet0/0/2]quit</span><br><span class="line">[R1]ip route-static 0.0.0.0 0 Dialer 1 preference 85 description dianxin</span><br><span class="line">[R1]dis this</span><br><span class="line">[R1]int Dialer 1</span><br><span class="line">[R1-Dialer1]dis this</span><br><span class="line">[V200R003C00]</span><br><span class="line">#</span><br><span class="line">interface Dialer1</span><br><span class="line"> link-protocol ppp</span><br><span class="line"> ppp pap local-user 5555 password simple 123456</span><br><span class="line"> ip address ppp-negotiate</span><br><span class="line"> dialer user 5555</span><br><span class="line"> dialer bundle 2</span><br><span class="line"> nat outbound 2001</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[R1-Dialer1]mtu 1492</span><br><span class="line">[R1-Dialer1]qui</span><br><span class="line">//优化配置:由于原始以太网报文在传输过程中增加了PPPOE (6字节)和PPP (2字节)的包头，为了使得传输数据在传输过程中不分片(提高传输效率)，建议在dialer 1口更改数据封装的MTU值。(以为以太网接口mtu默认是1500字节)</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    DX_R2:</span><br><span class="line">[DX_R2]ip pool pool1 //创建一个地址池</span><br><span class="line">[DX_R2-ip-pool-pool1]network 12.1.1.0 mask 24</span><br><span class="line">[DX_R2-ip-pool-pool1]gateway-list 12.1.1.2</span><br><span class="line">[DX_R2-ip-pool-pool1]qui	</span><br><span class="line">[DX_R2]aaa</span><br><span class="line">[DX_R2-aaa]local-user 5555 password cipher 123456 //用户名和I密码</span><br><span class="line">[DX_R2-aaa]local-user 5555 service-type ppp </span><br><span class="line">[DX_R2-aaa]qui</span><br><span class="line">[DX_R2]interface Virtual-Template 1 //虚拟拨号几口</span><br><span class="line">[DX_R2-Virtual-Template1]ppp authentication-mode pap </span><br><span class="line">[DX_R2-Virtual-Template1]remote address pool pool1</span><br><span class="line">[DX_R2-Virtual-Template1]ip address 12.1.1.2 255.255.255.0</span><br><span class="line">[DX_R2-Virtual-Template1]dis this</span><br><span class="line">[DX_R2-Virtual-Template1]qui</span><br><span class="line">[DX_R2]int g0/0/0</span><br><span class="line">[DX_R2-GigabitEthernet0/0/0]pppoe-server bind virtual-template 1 //将虚拟接口Virtual-Template 1和物理接口关联</span><br><span class="line">[DX_R2-GigabitEthernet0/0/0]</span><br><span class="line">//这个时候可以断了连接联通的线在用PC去ping 5.5.5.5能通即可 </span><br><span class="line">/*PC&gt;tracert 5.5.5.5 断了联通也可以这样tracert看一下我们走的12.1.1.2这一条路线</span><br><span class="line"> 1  192.168.3.254   78 ms  78 ms  94 ms</span><br><span class="line"> 2    *  *  *</span><br><span class="line"> 3  12.1.1.2   109 ms  110 ms  109 ms</span><br><span class="line"> 4  5.5.5.5   141 ms  78 ms  578 ms</span><br><span class="line">PC&gt;*/</span><br></pre></td></tr></table></figure>

<h3 id="12、出口配置"><a href="#12、出口配置" class="headerlink" title="12、出口配置"></a>12、出口配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">让电信的pppoe作为联通的备份出口(已经配置了)(优先级)R1：</span><br><span class="line">ip route-static 0.0.0.0 0.0.0.0 13.1.1.2 description liantong</span><br><span class="line">ip route-static 0.0.0.0 0.0.0.0 Dialer1 preference 85 description dianxin</span><br></pre></td></tr></table></figure>

<h3 id="13、NAT-server地址映射"><a href="#13、NAT-server地址映射" class="headerlink" title="13、NAT server地址映射"></a>13、NAT server地址映射</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">	R1:</span><br><span class="line">[R1]int g1/0/0	</span><br><span class="line">[R1-GigabitEthernet1/0/0]nat server protocol tcp global current-interface 80 inside 192.168.200.2 80 </span><br><span class="line">Are you sure to continue?[Y/N]:y</span><br><span class="line">//current-interface就是表示相应的接口地址13.1.1.1</span><br><span class="line">[R1-GigabitEthernet1/0/0]dis this</span><br><span class="line">[V200R003C00]</span><br><span class="line">#</span><br><span class="line">interface GigabitEthernet1/0/0</span><br><span class="line"> ip address 13.1.1.1 255.255.255.0 </span><br><span class="line"> nat server protocol tcp global current-interface www inside 192.168.200.2 www</span><br><span class="line"> nat outbound 2000</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[R1-GigabitEthernet1/0/0]</span><br><span class="line">------------------------------------</span><br><span class="line">//这个时候我们用一台真实的设备client来模拟外网5.5.5.5去访问我们的内网server，所以之前的loopBack0的地址就要删除了，不然会地址冲突的，5.5.5.1作为相应的client的网关</span><br><span class="line">	R5:</span><br><span class="line">[R5]int LoopBack 0</span><br><span class="line">[R5-LoopBack0]dis this</span><br><span class="line">#</span><br><span class="line">interface LoopBack0</span><br><span class="line"> ip address 5.5.5.5 255.255.255.0</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[R5-LoopBack0]undo ip add</span><br><span class="line">[R5-LoopBack0]qui</span><br><span class="line">[R5]int g0/0/0</span><br><span class="line">[R5-GigabitEthernet0/0/0]ip add 5.5.5.1 24</span><br><span class="line">[R5-GigabitEthernet0/0/0]q</span><br><span class="line">[R5]</span><br><span class="line">//这个时候可以在server上开启http服务，然后用百度去输入http://13.1.1.1,去访问到我们的server</span><br></pre></td></tr></table></figure>

<h3 id="14、ACL策略路由配置"><a href="#14、ACL策略路由配置" class="headerlink" title="14、ACL策略路由配置"></a>14、ACL策略路由配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">	R1：</span><br><span class="line">[R1]acl 3005</span><br><span class="line">[R1-acl-adv-3005]rule permit ip source 192.168.5.0 0.0.0.255 destination 192.168.0.0 0.0.255.255</span><br><span class="line">[R1-acl-adv-3005]rule deny ip source 192.168.5.0 0.0.0.255</span><br><span class="line">[R1-acl-adv-3005]dis this</span><br><span class="line">[V200R003C00]</span><br><span class="line">#</span><br><span class="line">acl number 3005  </span><br><span class="line"> rule 5 permit ip source 192.168.5.0 0.0.0.255 destination 192.168.0.0 0.0.255.2</span><br><span class="line">55 </span><br><span class="line"> rule 10 deny ip source 192.168.5.0 0.0.0.255 </span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[R1-acl-adv-3005]qui</span><br><span class="line">[R1]int g0/0/1</span><br><span class="line">[R1-GigabitEthernet0/0/1]traffic-filter inbound acl 3005</span><br><span class="line">[R1-GigabitEthernet0/0/1]int g0/0/0</span><br><span class="line">[R1-GigabitEthernet0/0/0]traffic-filter inbound acl 3005</span><br><span class="line">[R1-GigabitEthernet0/0/0]qui</span><br><span class="line">[R1]</span><br></pre></td></tr></table></figure>

<h3 id="15、Telnet远程配置"><a href="#15、Telnet远程配置" class="headerlink" title="15、Telnet远程配置"></a>15、Telnet远程配置</h3><p>红色的地址是管理地址用的，所有的设备都相似(三层设备不用配置IP地址)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line">	HX_SW1:</span><br><span class="line">[HX_SW1]aaa</span><br><span class="line">[HX_SW1-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[HX_SW1-aaa]local-user huawei service-type telnet </span><br><span class="line">[HX_SW1-aaa]qui	</span><br><span class="line">[HX_SW1]user-interface vty 0 4</span><br><span class="line">[HX_SW1-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[HX_SW1-ui-vty0-4]protocol inbound telnet </span><br><span class="line">[HX_SW1-ui-vty0-4]qui</span><br><span class="line">[HX_SW1]int vlanif 900</span><br><span class="line">[HX_SW1-Vlanif900]ip add 192.168.255.254 24</span><br><span class="line">[HX_SW1-Vlanif900]vrrp vrid 255 virtual-ip 192.168.255.1  </span><br><span class="line">[HX_SW1-Vlanif900]dis this</span><br><span class="line">#</span><br><span class="line">interface Vlanif900</span><br><span class="line"> ip address 192.168.255.254 255.255.255.0</span><br><span class="line"> vrrp vrid 255 virtual-ip 192.168.255.1</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[HX_SW1-Vlanif900]q</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HX_SW2:</span><br><span class="line">[HX_SW2]aaa</span><br><span class="line">[HX_SW2-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[HX_SW2-aaa]local-user huawei service-type telnet</span><br><span class="line">[HX_SW2-aaa]qui</span><br><span class="line">[HX_SW2]user-interface vty 0 4</span><br><span class="line">[HX_SW2-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[HX_SW2-ui-vty0-4]protocol inbound telnet</span><br><span class="line">[HX_SW2-ui-vty0-4]qui</span><br><span class="line">[HX_SW2]int vlanif 900</span><br><span class="line">[HX_SW2-Vlanif900]ip add 192.168.255.253 24</span><br><span class="line">[HX_SW2-Vlanif900]vrrp vrid 255 virtual-ip 192.168.255.1</span><br><span class="line">[HX_SW2-Vlanif900]dis this</span><br><span class="line">#</span><br><span class="line">interface Vlanif900</span><br><span class="line"> ip address 192.168.255.253 255.255.255.0</span><br><span class="line"> vrrp vrid 255 virtual-ip 192.168.255.1</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[HX_SW2-Vlanif900]q</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HJ_SW3:</span><br><span class="line">[HJ_SW3]aaa</span><br><span class="line">[HJ_SW3-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[HJ_SW3-aaa]local-user huawei service-type telnet</span><br><span class="line">[HJ_SW3-aaa]qui</span><br><span class="line">[HJ_SW3]user-interface vty 0 4</span><br><span class="line">[HJ_SW3-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[HJ_SW3-ui-vty0-4]protocol inbound telnet</span><br><span class="line">[HJ_SW3-ui-vty0-4]qui</span><br><span class="line">[HJ_SW3]int vlanif 900</span><br><span class="line">[HJ_SW3-Vlanif900]ip add 192.168.255.3 24</span><br><span class="line">[HJ_SW3-Vlanif900]qui</span><br><span class="line">[HJ_SW3]ip route-s 0.0.0.0 0 192.168.255.1</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    HJ_SW4:</span><br><span class="line">[HJ_SW4]aaa</span><br><span class="line">[HJ_SW4-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[HJ_SW4-aaa]local-user huawei service-type telnet</span><br><span class="line">[HJ_SW4-aaa]qui</span><br><span class="line">[HJ_SW4]user-interface vty 0 4</span><br><span class="line">[HJ_SW4-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[HJ_SW4-ui-vty0-4]protocol inbound telnet</span><br><span class="line">[HJ_SW4-ui-vty0-4]qui</span><br><span class="line">[HJ_SW4]int vlanif 900</span><br><span class="line">[HJ_SW4-Vlanif900]ip add 192.168.255.4 24</span><br><span class="line">[HJ_SW4-Vlanif900]qui</span><br><span class="line">[HJ_SW4]ip route-static 0.0.0.0 0 192.168.255.1</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    JR_SW5:</span><br><span class="line">[JR_SW5]aaa</span><br><span class="line">[JR_SW5-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[JR_SW5-aaa]local-user huawei service-type telnet</span><br><span class="line">[JR_SW5-aaa]qui</span><br><span class="line">[JR_SW5]user-interface vty 0 4</span><br><span class="line">[JR_SW5-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[JR_SW5-ui-vty0-4]protocol inbound telnet</span><br><span class="line">[JR_SW5-ui-vty0-4]qui</span><br><span class="line">[JR_SW5]int vlanif 900</span><br><span class="line">[JR_SW5-Vlanif900]ip add 192.168.255.5 24</span><br><span class="line">[JR_SW5-Vlanif900]qui</span><br><span class="line">[JR_SW5]ip route-static 0.0.0.0 0 192.168.255.1</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    JR_SW6:</span><br><span class="line">[JR_SW6]aaa</span><br><span class="line">[JR_SW6-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[JR_SW6-aaa]local-user huawei service-type telnet</span><br><span class="line">[JR_SW6-aaa]qui</span><br><span class="line">[JR_SW6]user-interface vty 0 4</span><br><span class="line">[JR_SW6-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[JR_SW6-ui-vty0-4]protocol inbound telnet</span><br><span class="line">[JR_SW6-ui-vty0-4]qui</span><br><span class="line">[JR_SW6]int vlanif 900</span><br><span class="line">[JR_SW6-Vlanif900]ip add 192.168.255.6 24</span><br><span class="line">[JR_SW6-Vlanif900]qui</span><br><span class="line">[JR_SW6]ip route-static 0.0.0.0 0 192.168.255.1</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    JR_SW7:</span><br><span class="line">[JR_SW7]aaa</span><br><span class="line">[JR_SW7-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[JR_SW7-aaa]local-user huawei service-type telnet</span><br><span class="line">[JR_SW7-aaa]qui</span><br><span class="line">[JR_SW7]user-interface vty 0 4</span><br><span class="line">[JR_SW7-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[JR_SW7-ui-vty0-4]protocol inbound telnet</span><br><span class="line">[JR_SW7-ui-vty0-4]qui</span><br><span class="line">[JR_SW7]int vlanif 900</span><br><span class="line">[JR_SW7-Vlanif900]ip add 192.168.255.7 24</span><br><span class="line">[JR_SW7-Vlanif900]qui</span><br><span class="line">[JR_SW7]ip route-static 0.0.0.0 0 192.168.255.1</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">    JR_SW8:</span><br><span class="line">[JR_SW8]aaa</span><br><span class="line">[JR_SW8-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[JR_SW8-aaa]local-user huawei service-type telnet</span><br><span class="line">[JR_SW8-aaa]qui</span><br><span class="line">[JR_SW8]user-interface vty 0 4</span><br><span class="line">[JR_SW8-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[JR_SW8-ui-vty0-4]protocol inbound telnet</span><br><span class="line">[JR_SW8-ui-vty0-4]qui</span><br><span class="line">[JR_SW8]int vlanif 900</span><br><span class="line">[JR_SW8-Vlanif900]ip add 192.168.255.8 24</span><br><span class="line">[JR_SW8-Vlanif900]qui</span><br><span class="line">[JR_SW8]ip route-static 0.0.0.0 0 192.168.255.1</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    R1:</span><br><span class="line">[R1]aaa</span><br><span class="line">[R1-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[R1-aaa]local-user huawei service-type telnet</span><br><span class="line">[R1-aaa]qui</span><br><span class="line">[R1]user-interface vty 0 4</span><br><span class="line">[R1-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[R1-ui-vty0-4]protocol inbound telnet</span><br><span class="line">[R1-ui-vty0-4]qui</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    FZ_R4:</span><br><span class="line">[FZ_R4]aaa</span><br><span class="line">[FZ_R4-aaa]local-user huawei privilege level 3 password cipher 5555</span><br><span class="line">[FZ_R4-aaa]local-user huawei service-type telnet</span><br><span class="line">[FZ_R4-aaa]qui</span><br><span class="line">[FZ_R4]user-interface vty 0 4</span><br><span class="line">[FZ_R4-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[FZ_R4-ui-vty0-4]protocol inbound telnet</span><br><span class="line">[FZ_R4-ui-vty0-4]qui</span><br><span class="line">------------------------------------</span><br><span class="line">    </span><br><span class="line">    pc路由器：</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname PC</span><br><span class="line">[PC]dhcp enable</span><br><span class="line">[PC]int e0/0/0</span><br><span class="line">[PC-Ethernet0/0/0]ip add dhcp-alloc  //接口自动获取IP地址</span><br><span class="line">[PC-Ethernet0/0/0]qui</span><br><span class="line">/*[PC]dis ip int br</span><br><span class="line">Interface                         IP Address/Mask      Physical   Protocol  </span><br><span class="line">Ethernet0/0/0                     192.168.2.249/24     up         up        </span><br><span class="line">Ethernet0/0/1                     unassigned           down       down       </span><br><span class="line">    </span><br><span class="line">[PC]dis ip routing-table */</span><br><span class="line"></span><br><span class="line">//这个时候接可以telnet了192.168.255.3-8 254 253、和相应的路由器接口地址</span><br><span class="line">/*&lt;PC&gt;telnet 192.168.255.7</span><br><span class="line">Trying 192.168.255.7 ...</span><br><span class="line">Press CTRL+K to abort</span><br><span class="line">Connected to 192.168.255.7 ...</span><br><span class="line"></span><br><span class="line">Username:huawei</span><br><span class="line">Password:5555</span><br><span class="line">Info: The max number of VTY users is 5, and the number</span><br><span class="line">      of current VTY users on line is 1.</span><br><span class="line">      The current login time is 2022-04-19 17:27:13.</span><br><span class="line">&lt;JR_SW7&gt;*/</span><br></pre></td></tr></table></figure>

<h3 id="16、配置无线网络"><a href="#16、配置无线网络" class="headerlink" title="16、配置无线网络"></a>16、配置无线网络</h3><p> 可能ap输入dis ip int br收到的地址硬是169.254开头的，这个时候就多等一会</p>
<p><img src="https://s1.imagehub.cc/images/2022/09/11/04.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">	AC:</span><br><span class="line">&lt;AC6605&gt;sy</span><br><span class="line">[AC6605]un in en</span><br><span class="line">[AC6605]sysname AC</span><br><span class="line">[AC]vlan batch 100 to 102</span><br><span class="line">[AC]int g0/0/2</span><br><span class="line">[AC-GigabitEthernet0/0/2]port link-type trunk </span><br><span class="line">[AC-GigabitEthernet0/0/2]port trunk allow-pass vlan all </span><br><span class="line">[AC-GigabitEthernet0/0/2]qui</span><br><span class="line">[AC]int Vlanif 100</span><br><span class="line">[AC-Vlanif100]ip add 192.168.100.100 24</span><br><span class="line">[AC-Vlanif100]qui</span><br><span class="line">[AC]capwap source int vlanif100</span><br><span class="line">[AC]wlan</span><br><span class="line">[AC-wlan-view]ap-group name CYY</span><br><span class="line">[AC-wlan-ap-group-CYY]q</span><br><span class="line">[AC-wlan-view]regulatory-domain-profile name domain1</span><br><span class="line">[AC-wlan-regulate-domain-domain1]country-code cn</span><br><span class="line">[AC-wlan-regulate-domain-domain1]q</span><br><span class="line">[AC-wlan-view]ap-group name CYY</span><br><span class="line">[AC-wlan-ap-group-CYY]regulatory-domain-profile domain1</span><br><span class="line">Warning: Modifying the country code will clear channel, power and antenna gain c</span><br><span class="line">onfigurations of the radio and reset the AP. Continue?[Y/N]:y</span><br><span class="line">[AC-wlan-ap-group-CYY]qui</span><br><span class="line">[AC-wlan-view]qui</span><br><span class="line">[AC]wlan</span><br><span class="line">[AC-wlan-view]ap-group name YYC</span><br><span class="line">[AC-wlan-ap-group-YYC]q</span><br><span class="line">[AC-wlan-view]regulatory-domain-profile name domain2</span><br><span class="line">[AC-wlan-regulate-domain-domain2]country-code cn</span><br><span class="line">[AC-wlan-regulate-domain-domain2]q</span><br><span class="line">[AC-wlan-view]ap-group name YYC</span><br><span class="line">[AC-wlan-ap-group-YYC]regulatory-domain-profile domain2</span><br><span class="line">Warning: Modifying the country code will clear channel, power and antenna gain c</span><br><span class="line">onfigurations of the radio and reset the AP. Continue?[Y/N]:y</span><br><span class="line">[AC-wlan-ap-group-YYC]qui</span><br><span class="line">[AC-wlan-view]ap auth-mode mac-auth</span><br><span class="line">[AC-wlan-view]ap-id 0 ap-mac 00e0-fc81-31c0</span><br><span class="line">[AC-wlan-ap-0]ap-name area_0</span><br><span class="line">[AC-wlan-ap-0]ap-group CYY</span><br><span class="line">Warning: This operation may cause AP reset. If the country code changes, it will</span><br><span class="line"> clear channel, power and antenna gain configurations of the radio, Whether to c</span><br><span class="line">ontinue? [Y/N]:y</span><br><span class="line">[AC-wlan-ap-0]qui</span><br><span class="line">[AC-wlan-view]ap auth-mode mac-auth</span><br><span class="line">[AC-wlan-view]ap-id 1 ap-mac 00e0-fc6a-4ad0</span><br><span class="line">[AC-wlan-ap-1]ap-name area_1</span><br><span class="line">[AC-wlan-ap-1]ap-group YYC</span><br><span class="line">Warning: This operation may cause AP reset. If the country code changes, it will</span><br><span class="line"> clear channel, power and antenna gain configurations of the radio, Whether to c</span><br><span class="line">ontinue? [Y/N]:y</span><br><span class="line">[AC-wlan-ap-1]qui</span><br><span class="line">[AC-wlan-view]qui</span><br><span class="line">[AC]wlan</span><br><span class="line">[AC-wlan-view]security-profile name A</span><br><span class="line">[AC-wlan-sec-prof-A]security wpa2 psk pass-phrase a1234567 aes</span><br><span class="line">[AC-wlan-sec-prof-A]q</span><br><span class="line">[AC-wlan-view]security-profile name X</span><br><span class="line">[AC-wlan-sec-prof-X]security wpa2 psk pass-phrase huawei@123 aes</span><br><span class="line">[AC-wlan-sec-prof-X]qui</span><br><span class="line">[AC-wlan-view]ssid-profile name B</span><br><span class="line">[AC-wlan-ssid-prof-B]ssid CYY-CYY</span><br><span class="line">[AC-wlan-ssid-prof-B]q</span><br><span class="line">[AC-wlan-view]ssid-profile name Y</span><br><span class="line">[AC-wlan-ssid-prof-Y]ssid YYC-YYC</span><br><span class="line">[AC-wlan-ssid-prof-Y]q</span><br><span class="line">[AC-wlan-view]vap-profile name C</span><br><span class="line">[AC-wlan-vap-prof-C]forward-mode tunnel</span><br><span class="line">[AC-wlan-vap-prof-C]service-vlan vlan-id 101</span><br><span class="line">[AC-wlan-vap-prof-C]security-profile A</span><br><span class="line">[AC-wlan-vap-prof-C]ssid-profile B</span><br><span class="line">[AC-wlan-vap-prof-C]qui</span><br><span class="line">[AC-wlan-view]vap-profile name Z</span><br><span class="line">[AC-wlan-vap-prof-Z]forward-mode tunnel</span><br><span class="line">[AC-wlan-vap-prof-Z]service-vlan vlan-id 102</span><br><span class="line">[AC-wlan-vap-prof-Z]security-profile X</span><br><span class="line">[AC-wlan-vap-prof-Z]ssid-profile Y</span><br><span class="line">[AC-wlan-vap-prof-Z]qui</span><br><span class="line">[AC-wlan-view]ap-group name CYY</span><br><span class="line">[AC-wlan-ap-group-CYY]vap-profile C wlan 1 radio 0</span><br><span class="line">Info: This operation may take a few seconds, please wait...done.</span><br><span class="line">[AC-wlan-ap-group-CYY]    vap-profile C wlan 1 radio 1</span><br><span class="line">Info: This operation may take a few seconds, please wait...done.</span><br><span class="line">[AC-wlan-ap-group-CYY]qui</span><br><span class="line">[AC-wlan-view]ap-group name YYC</span><br><span class="line">[AC-wlan-ap-group-YYC]vap-profile Z wlan 1 radio 0</span><br><span class="line">Info: This operation may take a few seconds, please wait...done.</span><br><span class="line">[AC-wlan-ap-group-YYC]vap-profile Z wlan 1 radio 1</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">    sw1:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname LSW1</span><br><span class="line">[LSW1]vlan batch 100 to 102</span><br><span class="line">[LSW1]int g0/0/1</span><br><span class="line">[LSW1-GigabitEthernet0/0/1]port link-type trunk </span><br><span class="line">[LSW1-GigabitEthernet0/0/1]port trunk pvid vlan 100</span><br><span class="line">[LSW1-GigabitEthernet0/0/1]port trunk allow-pass vlan 100 to 102</span><br><span class="line">[LSW1-GigabitEthernet0/0/1]q</span><br><span class="line">[LSW1]int g0/0/2</span><br><span class="line">[LSW1-GigabitEthernet0/0/2]port link-type trunk </span><br><span class="line">[LSW1-GigabitEthernet0/0/2]port trunk pvid vlan 100</span><br><span class="line">[LSW1-GigabitEthernet0/0/2]port trunk allow-pass vlan 100 to 102</span><br><span class="line">[LSW1-GigabitEthernet0/0/2]int g0/0/3</span><br><span class="line">[LSW1-GigabitEthernet0/0/3]port link-type trunk </span><br><span class="line">[LSW1-GigabitEthernet0/0/3]port trunk allow-pass vlan all</span><br><span class="line">[LSW1-GigabitEthernet0/0/3]</span><br><span class="line">------------------------------------ </span><br><span class="line">    </span><br><span class="line">    SW2:</span><br><span class="line">&lt;Huawei&gt;sy</span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname LSW2</span><br><span class="line">[LSW2]vlan batch 100 to 102 111</span><br><span class="line">[LSW2]int g0/0/3</span><br><span class="line">[LSW2-GigabitEthernet0/0/3]port link-type trunk </span><br><span class="line">[LSW2-GigabitEthernet0/0/3]port trunk allow-pass vlan all </span><br><span class="line">[LSW2-GigabitEthernet0/0/3]int g0/0/2</span><br><span class="line">[LSW2-GigabitEthernet0/0/2]port link-type trunk</span><br><span class="line">[LSW2-GigabitEthernet0/0/2]port trunk allow-pass vlan all</span><br><span class="line">[LSW2-GigabitEthernet0/0/2]qui</span><br><span class="line">[LSW2]int g0/0/1</span><br><span class="line">[LSW2-GigabitEthernet0/0/1]port link-type access </span><br><span class="line">[LSW2-GigabitEthernet0/0/1]port default vlan 111</span><br><span class="line">[LSW2-GigabitEthernet0/0/1]qui</span><br><span class="line">[LSW2]int vlan 100</span><br><span class="line">[LSW2-Vlanif100]ip add 192.168.100.1 24</span><br><span class="line">[LSW2-Vlanif100]qui</span><br><span class="line">[LSW2]int vlan 101</span><br><span class="line">[LSW2-Vlanif101]ip add 192.168.101.1 24</span><br><span class="line">[LSW2-Vlanif101]qui</span><br><span class="line">[LSW2]int vlan102</span><br><span class="line">[LSW2-Vlanif102]ip add 192.168.102.1 24</span><br><span class="line">[LSW2-Vlanif102]qui</span><br><span class="line">[LSW2]int vlan 111</span><br><span class="line">[LSW2-Vlanif111]ip add 192.168.111.1 24</span><br><span class="line">[LSW2-Vlanif111]qui</span><br><span class="line">[LSW2]dhcp enable </span><br><span class="line">Info: The operation may take a few seconds. Please wait for a moment.done.</span><br><span class="line">[LSW2]ip pool ap_pool</span><br><span class="line">Info:It&#x27;s successful to create an IP address pool.</span><br><span class="line">[LSW2-ip-pool-ap_pool]gateway-list 192.168.100.1</span><br><span class="line">[LSW2-ip-pool-ap_pool]network 192.168.100.0 mask 24</span><br><span class="line">[LSW2-ip-pool-ap_pool]excluded-ip-address 192.168.100.100</span><br><span class="line">[LSW2-ip-pool-ap_pool]dns-list 114.114.114.114</span><br><span class="line">[LSW2-ip-pool-ap_pool]qui</span><br><span class="line">[LSW2]ip pool HUA_1</span><br><span class="line">Info:It&#x27;s successful to create an IP address pool.</span><br><span class="line">[LSW2-ip-pool-hua_1]gateway-list 192.168.101.1</span><br><span class="line">[LSW2-ip-pool-hua_1]network 192.168.101.0 mask 24</span><br><span class="line">[LSW2-ip-pool-hua_1]dns-list 114.114.114.114</span><br><span class="line">[LSW2-ip-pool-hua_1]qui</span><br><span class="line">[LSW2]ip pool HUA_2</span><br><span class="line">Info:It&#x27;s successful to create an IP address pool.</span><br><span class="line">[LSW2-ip-pool-hua_2]gateway-list 192.168.102.1</span><br><span class="line">[LSW2-ip-pool-hua_2]network 192.168.102.0 mask 24</span><br><span class="line">[LSW2-ip-pool-hua_2]dns-list 114.114.114.114</span><br><span class="line">[LSW2-ip-pool-hua_2]qui</span><br><span class="line">[LSW2]int vlan 100</span><br><span class="line">[LSW2-Vlanif100]dhcp select global </span><br><span class="line">[LSW2-Vlanif100]qui</span><br><span class="line">[LSW2]int vlan 101</span><br><span class="line">[LSW2-Vlanif101]dhcp select global</span><br><span class="line">[LSW2-Vlanif101]int vlan102</span><br><span class="line">[LSW2-Vlanif102]dhcp select global</span><br><span class="line">[LSW2-Vlanif102]qui</span><br><span class="line">[LSW2]ip route-static 0.0.0.0 0 192.168.111.2</span><br><span class="line">------------------------------------ </span><br><span class="line">    </span><br><span class="line">    R1:</span><br><span class="line"></span><br><span class="line">&lt;R1&gt;sy</span><br><span class="line">Enter system view, return user view with Ctrl+Z.</span><br><span class="line">[R1]int g3/0/0</span><br><span class="line">[R1-GigabitEthernet3/0/0]ip add 192.168.111.2 24</span><br><span class="line">[R1-GigabitEthernet3/0/0]qui</span><br><span class="line">[R1]ip route-static 192.168.101.0 255.255.255.0 192.168.111.1</span><br><span class="line">[R1]ip route-static 192.168.102.0 255.255.255.0 192.168.111.1</span><br><span class="line">[R1]qui</span><br><span class="line">&lt;R1&gt;save</span><br></pre></td></tr></table></figure>

<h2 id="六、单个关键技术的设计与实现案例"><a href="#六、单个关键技术的设计与实现案例" class="headerlink" title="六、单个关键技术的设计与实现案例"></a>六、单个关键技术的设计与实现案例</h2><h3 id="1、路由器静态路由实验"><a href="#1、路由器静态路由实验" class="headerlink" title="1、路由器静态路由实验"></a>1、路由器静态路由实验</h3><p><img src="https://s1.imagehub.cc/images/2022/09/11/08.png"></p>
<p> R1、R2、R3都同理配置<br>路由器R1: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]un in en</span><br><span class="line">Info: Information center is disabled.</span><br><span class="line">[Huawei]sysname R1</span><br><span class="line">[R1]interface g0/0/1				//进入g0/0/1接口</span><br><span class="line">[R1-GigabitEthernet0/0/1]ip address 10.1.1.1 24  //配置g0/0/1IP地址</span><br><span class="line">[R1-GigabitEthernet0/0/1]quit </span><br><span class="line">[R1]interface g0/0/2</span><br><span class="line">[R1-GigabitEthernet0/0/2]ip address 10.1.4.1 30</span><br><span class="line">[R1-GigabitEthernet0/0/2]quit 	</span><br><span class="line">[R1]ip route-static 10.1.2.0 24 10.1.4.2	//配置静态路由</span><br><span class="line">    //目的网段  子网掩码  下一跳</span><br><span class="line">[R1]ip route-static 10.1.3.0 24 10.1.4.2</span><br><span class="line">&lt;R1&gt;save</span><br></pre></td></tr></table></figure>

<p> 同理路由器R2: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//配置静态路由</span><br><span class="line">[R2]ip route-static 10.1.1.0 24 10.1.4.1	//配置静态路由</span><br><span class="line">    //目的网段  子网掩码  下一跳</span><br><span class="line">[R2]ip route-static 10.1.3.0 24 10.1.5.2	</span><br></pre></td></tr></table></figure>

<p> PC1（其他PC机同理）: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IP地址：10.1.1.2</span><br><span class="line">子网掩码：255.255.255.0</span><br><span class="line">网关：10.1.1.1</span><br></pre></td></tr></table></figure>

<h3 id="2、交换机VLAN配置实验"><a href="#2、交换机VLAN配置实验" class="headerlink" title="2、交换机VLAN配置实验"></a>2、交换机VLAN配置实验</h3><p>基于GVRP的VLAN配置实验：</p>
<p><img src="https://s1.imagehub.cc/images/2022/09/11/09.png"></p>
<p> 第一步：交换机LSW1和LSW2的基本配置： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">	LSW1:</span><br><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">Enter system view, return user view with Ctrl+Z.</span><br><span class="line">[Huawei]un in en</span><br><span class="line">Info: Information center is disabled.</span><br><span class="line">[Huawei]sysname SwitchA</span><br><span class="line">[SwitchA]gvrp</span><br><span class="line">[SwitchA]vlan 2				//创建一个vlan2</span><br><span class="line">[SwitchA-vlan2]quit </span><br><span class="line">[SwitchA]int vlan2			//进入vlan2</span><br><span class="line">[SwitchA-Vlanif2]ip address 192.168.1.254 24</span><br><span class="line"></span><br><span class="line">    LSW2:</span><br><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]undo info-center enable </span><br><span class="line">[Huawei]sysname SwitchB</span><br><span class="line">[SwitchB]gvrp</span><br><span class="line">[SwitchA]vlan 2				//创建一个vlan2  </span><br></pre></td></tr></table></figure>

<p> 第二步：交换机LSW1和LSW2的端口配置： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">	LSW1:</span><br><span class="line">[SwitchA]int g0/0/1</span><br><span class="line">[SwitchA-GigabitEthernet0/0/1]port link-type access //与连接PC1的端口链路类型设置为access</span><br><span class="line">[SwitchA-GigabitEthernet0/0/1]port default vlan 2	//将端口G0/0/1加入vlan 2</span><br><span class="line">[SwitchA-GigabitEthernet0/0/1]int g0/0/2</span><br><span class="line">[SwitchA-GigabitEthernet0/0/2]port link-type trunk	//将交换机互联的端口链路类型设置为trunk</span><br><span class="line">[SwitchA-GigabitEthernet0/0/2]port trunk allow-pass vlan all //将端口G0/0/2加入vlan2</span><br><span class="line">    </span><br><span class="line">	LSW2:</span><br><span class="line">[SwitchB]int g0/0/1</span><br><span class="line">[SwitchB-GigabitEthernet0/0/1]port link-type access //与连接PC1的端口链路类型设置为access</span><br><span class="line">[SwitchB-GigabitEthernet0/0/1]port default vlan 2	//将端口G0/0/1加入vlan 2</span><br><span class="line">[SwitchB-GigabitEthernet0/0/1]int g0/0/2</span><br><span class="line">[SwitchB-GigabitEthernet0/0/2]port link-type trunk  //将交换机互联的端口链路类型设置为trunk</span><br><span class="line">[SwitchB-GigabitEthernet0/0/2]port trunk allow-pass vlan all //将端口G0/0/2加入vlan2</span><br></pre></td></tr></table></figure>

<p> 第三步：交换机LSW1和LSW2配置GVRP： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	LSW1:</span><br><span class="line">[SwitchA]int g0/0/2</span><br><span class="line">[SwitchA-GigabitEthernet0/0/2]gvrp  //开启gvrp</span><br><span class="line">    </span><br><span class="line">    LSW2:</span><br><span class="line">[SwitchB]int g0/0/2</span><br><span class="line">[SwitchB-GigabitEthernet0/0/2]gvrp</span><br></pre></td></tr></table></figure>

<p> 第四步：配置PC1和PC2的IP </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PC1的IP地址：192.168.1.1</span><br><span class="line">网关：192.168.1.254</span><br><span class="line">子网掩码：255.255.255.0</span><br><span class="line">    </span><br><span class="line">PC1的IP地址：192.168.1.2</span><br><span class="line">网关：192.168.1.254</span><br><span class="line">子网掩码：255.255.255.0</span><br><span class="line">    </span><br><span class="line">PC1上：ping 192.168.1.2</span><br><span class="line">PC2上：ping 192.168.1.1</span><br></pre></td></tr></table></figure>

<h3 id="3、动态路由RIP实验"><a href="#3、动态路由RIP实验" class="headerlink" title="3、动态路由RIP实验"></a>3、动态路由RIP实验</h3><p><img src="https://s1.imagehub.cc/images/2022/09/11/10.png"></p>
<p> 1、配置各接口:R1&#x2F;R2&#x2F;R3(都如此) </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	R1:</span><br><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]un in en</span><br><span class="line">Info: Information center is disabled.</span><br><span class="line">[Huawei]int g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip address 192.168.1.1 24</span><br><span class="line">	R2:</span><br><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]interface g0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]ip address 192.168.1.2 24</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]int g0/0/2</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]ip address 10.10.0.1 24</span><br></pre></td></tr></table></figure>

<p> 2、配置RIP协议 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">	R1:</span><br><span class="line">[Huawei]rip</span><br><span class="line">[Huawei-rip-1]network 192.168.1.0</span><br><span class="line">[Huawei-rip-1]return </span><br><span class="line">&lt;Huawei&gt;save</span><br><span class="line">    </span><br><span class="line">    R2:</span><br><span class="line">[Huawei]rip</span><br><span class="line">[Huawei-rip-1]network 192.168.1.0</span><br><span class="line">[Huawei-rip-1]network 10.0.0.0</span><br><span class="line">[Huawei-rip-1]return</span><br><span class="line">&lt;Huawei&gt;save</span><br><span class="line">    </span><br><span class="line">    R3:</span><br><span class="line">[Huawei]rip</span><br><span class="line">[Huawei-rip-1]network 10.0.0.0 </span><br><span class="line">[Huawei-rip-1]return</span><br><span class="line">&lt;Huawei&gt;save</span><br></pre></td></tr></table></figure>

<p> 3、检验结果:display ip routing、ping </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">	R1:</span><br><span class="line">Destination/Mask    Proto     Pre  Cost      NextHop </span><br><span class="line">      10.0.0.0/8    RIP       100   1        192.168.1.2 </span><br><span class="line">    //目标网段      RIP获取    管理距离         下一跳</span><br></pre></td></tr></table></figure>

<h3 id="4、动态路由OSPF实验"><a href="#4、动态路由OSPF实验" class="headerlink" title="4、动态路由OSPF实验"></a>4、动态路由OSPF实验</h3><p><img src="https://s1.imagehub.cc/images/2022/09/11/11.png"></p>
<p>第一步：配置IP地址<br>第二步：开通OSPF </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[R1]ospf</span><br><span class="line">[R1-ospf-1]area 0</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]network 192.200.10.4   0.0.0.3</span><br><span class="line">    					//   网络号/网络地址  反掩码</span><br><span class="line">[R1-ospf-1-area-0.0.0.0]area 1</span><br><span class="line">[R1-ospf-1-area-0.0.0.1]network 192.1.0.128 0.0.0.63</span><br></pre></td></tr></table></figure>

<p>第三步：验证ping、dis ip routing、dis cu </p>
<h3 id="5、无线网络WLAN"><a href="#5、无线网络WLAN" class="headerlink" title="5、无线网络WLAN"></a>5、无线网络WLAN</h3><p><img src="https://s1.imagehub.cc/images/2022/09/11/12.png"></p>
<p> 基本的配置和vlan划分： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"> sysname AC</span><br><span class="line">#</span><br><span class="line">vlan batch 10 20 //创建vlan10 20 </span><br><span class="line">#</span><br><span class="line">dhcp enable //开启dhcp服务</span><br><span class="line">#</span><br><span class="line">ip pool vlan20 //创建名为“vlan20”的地址池，用作业务vlan（即无线设备获取到的上网地址）</span><br><span class="line"> gateway-list 192.168.20.254 </span><br><span class="line"> network 192.168.20.0 mask 255.255.255.0 </span><br><span class="line"> lease unlimited</span><br><span class="line"> dns-list 114.114.114.114 8.8.8.8 </span><br><span class="line">#</span><br><span class="line">ip pool vlan10 //创建名为“vlan10”的地址池，用作管理vlan（AP设备自身的IP地址）</span><br><span class="line"> gateway-list 192.168.10.254 </span><br><span class="line"> network 192.168.10.0 mask 255.255.255.0 </span><br><span class="line"> lease unlimited</span><br><span class="line"> dns-list 114.114.114.114 8.8.8.8 </span><br><span class="line">#</span><br><span class="line">interface Vlanif10 //管理vlan的地址池</span><br><span class="line"> ip address 192.168.10.254 255.255.255.0</span><br><span class="line"> dhcp select global //获取地址的方式是全局获取</span><br><span class="line">#</span><br><span class="line">interface Vlanif20//业务vlan的地址池</span><br><span class="line"> ip address 192.168.20.254 255.255.255.0</span><br><span class="line"> dhcp select global</span><br><span class="line">#</span><br><span class="line">interface GigabitEthernet0/0/1 </span><br><span class="line">//这里为啥要设置PVID呢？因为AP不能识别tag标签，就像路由器和PC一样，需要端口剥离标签来识别</span><br><span class="line">//事实上，此处的端口也可以设置为ACCESS类型</span><br><span class="line"> port link-type trunk</span><br><span class="line"> port trunk pvid vlan 10</span><br><span class="line"> undo port trunk allow-pass vlan 1</span><br><span class="line"> port trunk allow-pass vlan 10</span><br><span class="line">#</span><br><span class="line">capwap source interface vlanif10 //选择源接口地址</span><br></pre></td></tr></table></figure>

<p> 一、新建AP组，域管理模板，组里调用域管理模板<br>1、创建AP组，方便后面其他AP加入此组，统一配置 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[AC] wlan</span><br><span class="line">[AC-wlan-view] ap-group name CYY //创建组名为CYY的AP组</span><br><span class="line">[AC-wlan-ap-group-ap-group1] quit</span><br></pre></td></tr></table></figure>

<p>2、创建域管理模板，国家代码CN</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[AC-wlan-view] regulatory-domain-profile name domain1  //创建姓名为domain1的模板</span><br><span class="line">[AC-wlan-regulate-domain-domain1] country-code cn</span><br></pre></td></tr></table></figure>

<p>3、进入新创建的AP组，调用刚才创建的模板。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[AC-wlan-view] ap-group name CYY</span><br><span class="line">[AC-wlan-ap-group-ap-group1] regulatory-domain-profile domain1 </span><br><span class="line">//新创建的HYDQ的组调用新建的domain1域控模板</span><br></pre></td></tr></table></figure>

<p>二、设置AP上线，方式是MAC地址上线<br>1、AP上线，将此AP加入新建的AP组（CYY） </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[AC]wlan</span><br><span class="line">[AC-wlan-view]ap auth-mode mac-auth   //AP上线的方式是mac认证</span><br><span class="line">[AC-wlan-view]ap-id 0 ap-mac 00e0-fc07-6580</span><br><span class="line">[AC-wlan-ap-0]ap-name area_1  //这个AP的区域命名为are_1</span><br><span class="line">[AC-wlan-ap-0]ap-group CYY  //将此AP加入组HYDQ</span><br></pre></td></tr></table></figure>

<p>三，配置AC的源接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[AC] capwap source <span class="keyword">interface</span> <span class="title class_">vlanif</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>四、配置WLAN业务参数<br>1、创建安全模板（包含认证方式和密码）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[AC-wlan-view] security-profile name A</span><br><span class="line">[AC-wlan-sec-prof-wlan-security] security wpa2 psk pass-phrase a1234567 aes<span class="comment">//a1234567是密码</span></span><br><span class="line">[AC-wlan-sec-prof-wlan-security] quit</span><br></pre></td></tr></table></figure>

<p>2、创建SSID模板，并配置SSID的名称为“CYY-CYY”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[AC-wlan-view] ssid-profile name B</span><br><span class="line">[AC-wlan-ssid-prof-wlan-ssid] ssid HYDQ-CYY <span class="comment">//上线后的AP 的WiFi名称</span></span><br><span class="line">[AC-wlan-ssid-prof-wlan-ssid] quit</span><br></pre></td></tr></table></figure>

<p>3、创建VAP模板，配置业务数据转发模式，业务vlan，并且引用安全模板和SSID模板</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[AC-wlan-view] vap-profile name C<span class="comment">//创建VAP模板，“C”</span></span><br><span class="line">[AC-wlan-vap-prof-wlan-vap] forward-mode tunnel<span class="comment">//设置转发模式为隧道转发</span></span><br><span class="line">[AC-wlan-vap-prof-wlan-vap] service-vlan vlan-id <span class="number">20</span>  <span class="comment">//这里的业务VLAN会觉得手机或者SAT工作站的IP地址取决于哪个VLAN</span></span><br><span class="line">[AC-wlan-vap-prof-wlan-vap] security-profile A<span class="comment">//调用安全模板</span></span><br><span class="line">[AC-wlan-vap-prof-wlan-vap] ssid-profile B<span class="comment">//调用SSID模板</span></span><br><span class="line">[AC-wlan-vap-prof-wlan-vap] quit</span><br></pre></td></tr></table></figure>

<p>4、让AP组引用VAP模板</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[AC-wlan-view] ap-group name CYY</span><br><span class="line">[AC-wlan-ap-group-ap-group1] vap-profile C wlan <span class="number">1</span> radio <span class="number">0</span>       <span class="comment">//0为2.4Ghz射频</span></span><br><span class="line">[AC-wlan-ap-group-ap-group1] vap-profile C wlan <span class="number">1</span> radio <span class="number">1</span>      <span class="comment">//1为5Ghz射频</span></span><br><span class="line">[AC-wlan-ap-group-ap-group1] quit</span><br></pre></td></tr></table></figure>

<p> 截至此时，AP已经配置完毕可以正常连接，工作站和手机搜到的名称为：CYY-CYY，密码是a1234567 </p>
<h3 id="6、路由DHCP实验"><a href="#6、路由DHCP实验" class="headerlink" title="6、路由DHCP实验"></a>6、路由DHCP实验</h3><p><img src="https://s1.imagehub.cc/images/2022/09/11/13.png"></p>
<h4 id="基于global全局配置"><a href="#基于global全局配置" class="headerlink" title="基于global全局配置"></a>基于global全局配置</h4><p>第一步：配置IP地址：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname R1</span><br><span class="line">[R1]<span class="keyword">interface</span> <span class="title class_">g0</span>/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]ip address <span class="number">192.168</span><span class="number">.1</span><span class="number">.254</span> <span class="number">24</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]quit</span><br><span class="line"></span><br><span class="line">[R1]ip pool PC		<span class="comment">//创建地址池名字为PC</span></span><br><span class="line">Info:It<span class="string">&#x27;s successful to create an IP address pool.</span></span><br><span class="line"><span class="string">[R1-ip-pool-PC]gateway-list 192.168.1.254  //获取网关	</span></span><br><span class="line"><span class="string">[R1-ip-pool-PC]network 192.168.1.0 mask 24	//分配网段</span></span><br><span class="line"><span class="string">[R1-ip-pool-PC]quit</span></span><br></pre></td></tr></table></figure>

<p>第二步：开启DHCP配置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[R1]dhcp enable </span><br><span class="line">Info: The operation may take a few seconds. Please wait <span class="keyword">for</span> a moment.done.</span><br><span class="line">[R1]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]dhcp select global <span class="comment">//基于global分配</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]quit</span><br><span class="line">    </span><br><span class="line">&lt;R1&gt;save</span><br></pre></td></tr></table></figure>

<h4 id="基于interface接口配置"><a href="#基于interface接口配置" class="headerlink" title="基于interface接口配置"></a>基于interface接口配置</h4><p>第一步：配置ip</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[R3-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]ip address <span class="number">192.168</span><span class="number">.2</span><span class="number">.254</span> <span class="number">24</span></span><br></pre></td></tr></table></figure>

<p>第二步：开启DHCP</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R3]dhcp enable </span><br><span class="line">[R3]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">[R3-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]dhcp select interface<span class="comment">//用于该端口</span></span><br></pre></td></tr></table></figure>

<h3 id="7、访问控制列表ACL实验"><a href="#7、访问控制列表ACL实验" class="headerlink" title="7、访问控制列表ACL实验"></a>7、访问控制列表ACL实验</h3><p><img src="https://s1.imagehub.cc/images/2022/09/11/14.png"></p>
<p>第一步：配置ip地址<br>第二步：配置静态路由或RIP全网连通（此处以静态路由为例）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">静态路由：</span><br><span class="line">[R1]ip route-<span class="keyword">static</span> <span class="number">192.168</span><span class="number">.20</span><span class="number">.0</span> <span class="number">24</span> <span class="number">192.168</span><span class="number">.12</span><span class="number">.2</span>	<span class="comment">// 目的网段    网关  下一跳</span></span><br><span class="line">[R2]ip route-<span class="keyword">static</span> <span class="number">192.168</span><span class="number">.10</span><span class="number">.0</span> <span class="number">24</span> <span class="number">192.168</span><span class="number">.12</span><span class="number">.1</span>	<span class="comment">// 目的网段    网关  下一跳</span></span><br></pre></td></tr></table></figure>

<p> 第三步：配置ACL、ACL规则，并应用 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">配置ACL禁止PC3与PC1之间的访问：</span><br><span class="line">&lt;R2&gt;system-view </span><br><span class="line">[R2]acl <span class="number">3000</span></span><br><span class="line">[R2-acl-adv-<span class="number">3000</span>]rule <span class="number">5</span> deny ip source <span class="number">192.168</span><span class="number">.20</span><span class="number">.3</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.255</span> destination <span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.255</span></span><br><span class="line"><span class="comment">//前是源网段 反掩码 后是目的网段 反掩码</span></span><br><span class="line"><span class="comment">//表示的是拒绝20.3这个网段访问10.1这个网段(整个网段)</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">//(还以表示为[R2-acl-adv-3000]rule 5 deny ip source 192.168.20.3 0 destination 192.168.10.1 0)此处的0表示的是主机数(阻止20.3的访问IP地址为10.1这个地址)</span></span><br><span class="line">    </span><br><span class="line">[R2-acl-adv-<span class="number">3000</span>]quit</span><br><span class="line">[R2]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">[R2-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]traffic-filter inbound acl <span class="number">3000</span></span><br><span class="line">[R2-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]quit</span><br></pre></td></tr></table></figure>

<p>第四步：验证ACL。display acl 3000、dis cu、 dis acl all、ping命令<br>ACL其他命令： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[SW]time-range satime <span class="number">8</span>:<span class="number">00</span> to <span class="number">18</span>:<span class="number">00</span> working-day <span class="comment">//设置时间</span></span><br><span class="line">[SW]traffic classifier c_m <span class="comment">//创建一个c_m的流分类</span></span><br><span class="line">[SW-classifier-c_m]<span class="keyword">if</span>-match acl <span class="number">3002</span> <span class="comment">//将ACL与流分类关联(if-match设定流分类分匹配规则)</span></span><br><span class="line">[SW]traffic behavior d_m <span class="comment">//创建一个流行为</span></span><br><span class="line">[SW-behavior-d_m]deny <span class="comment">//配置流行为动作为拒绝报文通过</span></span><br><span class="line">[SW]traffic policy e_m <span class="comment">//创建流策略</span></span><br><span class="line">[SW-trafficcpolicy-e_m]classifier c_m behavior d_m</span><br><span class="line">[SW]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">1</span> <span class="comment">//进入接口</span></span><br><span class="line">[SW-g0/<span class="number">0</span>/<span class="number">1</span>]traffic-policy e_m outbound <span class="comment">//将策略应用到接口</span></span><br></pre></td></tr></table></figure>

<h3 id="8、单臂路由技术"><a href="#8、单臂路由技术" class="headerlink" title="8、单臂路由技术"></a>8、单臂路由技术</h3><p><img src="https://s1.imagehub.cc/images/2022/09/11/15.png"></p>
<p>第一步：配置PC机IP地址<br>第二步：配置Switch交换机 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">	SW1:</span><br><span class="line">[SW1]<span class="type">int</span> e0/<span class="number">0</span>/<span class="number">2</span></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">2</span>]port link-type access<span class="comment">//设置02端口为access口</span></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">2</span>]port <span class="keyword">default</span> vlan <span class="number">10</span></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">2</span>]<span class="type">int</span> e0/<span class="number">0</span>/<span class="number">3</span></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">3</span>]port link-type access<span class="comment">//设置03端口为access口</span></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">3</span>]port <span class="keyword">default</span> vlan <span class="number">20</span></span><br><span class="line"></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">3</span>]<span class="type">int</span> e0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">1</span>]port link-type trunk</span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">1</span>]port trunk allow-pass vlan <span class="number">10</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">1</span>]<span class="type">int</span> e0/<span class="number">0</span>/<span class="number">4</span></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">4</span>]port link-type trunk </span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">4</span>]port trunk allow-pass vlan <span class="number">10</span> <span class="number">20</span></span><br><span class="line">[SW1-Ethernet0/<span class="number">0</span>/<span class="number">4</span>]quit</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">	SW2:</span><br><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname SW2</span><br><span class="line">[SW2]vlan batch <span class="number">10</span> <span class="number">20</span>	<span class="comment">//批量创建vlan 10 和vlan20</span></span><br><span class="line">[SW2]<span class="type">int</span> e0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[SW2-Ethernet0/<span class="number">0</span>/<span class="number">1</span>]port link-type trunk  <span class="comment">//设置01口为trunk</span></span><br><span class="line">[SW2-Ethernet0/<span class="number">0</span>/<span class="number">1</span>]port trunk allow-pass vlan <span class="number">10</span> <span class="number">20</span> <span class="comment">//允许10 20通过</span></span><br><span class="line">    </span><br><span class="line">[SW2-Ethernet0/<span class="number">0</span>/<span class="number">1</span>]<span class="type">int</span> e0/<span class="number">0</span>/<span class="number">2</span></span><br><span class="line">[SW2-Ethernet0/<span class="number">0</span>/<span class="number">2</span>]port link-type access</span><br><span class="line">[SW2-Ethernet0/<span class="number">0</span>/<span class="number">2</span>]port <span class="keyword">default</span> vlan <span class="number">10</span></span><br><span class="line">    </span><br><span class="line">[SW2-Ethernet0/<span class="number">0</span>/<span class="number">2</span>]<span class="type">int</span> e0/<span class="number">0</span>/<span class="number">3</span></span><br><span class="line">[SW2-Ethernet0/<span class="number">0</span>/<span class="number">3</span>]port link-type access</span><br><span class="line">[SW2-Ethernet0/<span class="number">0</span>/<span class="number">3</span>]port <span class="keyword">default</span> vlan <span class="number">20</span></span><br><span class="line">[SW2-Ethernet0/<span class="number">0</span>/<span class="number">3</span>]quit</span><br></pre></td></tr></table></figure>

<p>第三步：配置Router路由器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view </span><br><span class="line">[Huawei]un in en</span><br><span class="line">[Huawei]sysname R1</span><br><span class="line">[R1]<span class="keyword">interface</span> <span class="title class_">g0</span>/<span class="number">0</span>/<span class="number">0.1</span>		<span class="comment">//进入一个逻辑端口0.1</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0.1</span>]dot1q termination vid <span class="number">10</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0.1</span>]ip address <span class="number">192.168</span><span class="number">.1</span><span class="number">.254</span> <span class="number">24</span> <span class="comment">//设置IP地址</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0.1</span>]arp broadcast enable  <span class="comment">//开启arp</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0.1</span>]quit</span><br><span class="line">[R1]<span class="keyword">interface</span> <span class="title class_">g0</span>/<span class="number">0</span>/<span class="number">0.2</span>		<span class="comment">//进入一个逻辑端口0.2</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0.2</span>]dot1q termination vid <span class="number">20</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0.2</span>]ip address <span class="number">192.168</span><span class="number">.2</span><span class="number">.254</span> <span class="number">24</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0.2</span>]arp broadcast enable</span><br></pre></td></tr></table></figure>

<p>第四步：测试vlan</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SW1:dis vlan</span><br><span class="line"><span class="number">10</span>   common  UT:Eth0/<span class="number">0</span>/<span class="number">2</span>(U)                                                     </span><br><span class="line">             TG:Eth0/<span class="number">0</span>/<span class="number">1</span>(U)     Eth0/<span class="number">0</span>/<span class="number">4</span>(U)   </span><br><span class="line"><span class="number">20</span>   common  UT:Eth0/<span class="number">0</span>/<span class="number">3</span>(U)                                                     </span><br><span class="line">             TG:Eth0/<span class="number">0</span>/<span class="number">1</span>(U)     Eth0/<span class="number">0</span>/<span class="number">4</span>(U)  </span><br><span class="line">SW2:dis vlan</span><br><span class="line"><span class="number">10</span>   common  UT:Eth0/<span class="number">0</span>/<span class="number">2</span>(U)                                                     </span><br><span class="line">             TG:Eth0/<span class="number">0</span>/<span class="number">1</span>(U)                                                     </span><br><span class="line"><span class="number">20</span>   common  UT:Eth0/<span class="number">0</span>/<span class="number">3</span>(U)                                                     </span><br><span class="line">             TG:Eth0/<span class="number">0</span>/<span class="number">1</span>(U)   </span><br></pre></td></tr></table></figure>

<h3 id="9、地址转换NAT技术实验"><a href="#9、地址转换NAT技术实验" class="headerlink" title="9、地址转换NAT技术实验"></a>9、地址转换NAT技术实验</h3><p><img src="https://s1.imagehub.cc/images/2022/09/11/16.png"></p>
<h4 id="静态nat"><a href="#静态nat" class="headerlink" title="静态nat"></a>静态nat</h4><p>步骤一：配合PC机地址</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PC1:<span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.254</span></span><br><span class="line">PC2:<span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.254</span></span><br><span class="line">PC3:<span class="number">192.168</span><span class="number">.2</span><span class="number">.1</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.254</span></span><br></pre></td></tr></table></figure>

<p>步骤二：配置路由器R1、R2地址</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">R1:</span><br><span class="line">[Huawei]sysname R1</span><br><span class="line">[R1]<span class="keyword">interface</span> <span class="title class_">g0</span>/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]ip address <span class="number">192.168</span><span class="number">.1</span><span class="number">.254</span> <span class="number">24</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]ip address <span class="number">10.10</span><span class="number">.1</span><span class="number">.1</span> <span class="number">24</span></span><br><span class="line"></span><br><span class="line">R2:</span><br><span class="line">[Huawei]sysname R2</span><br><span class="line">[R2]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">[R2-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]ip address <span class="number">10.10</span><span class="number">.1</span><span class="number">.2</span> <span class="number">24</span></span><br><span class="line">[R2-GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[R2-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]ip address <span class="number">192.168</span><span class="number">.2</span><span class="number">.254</span> <span class="number">24</span></span><br></pre></td></tr></table></figure>

<p> 步骤三：配置静态nat </p>
<p><img src="https://s1.imagehub.cc/images/2022/09/11/17.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;R1&gt;system-view </span><br><span class="line">[R1]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]nat <span class="keyword">static</span> glo	</span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]nat <span class="keyword">static</span> global <span class="number">172.16</span><span class="number">.1</span><span class="number">.1</span> inside <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line"><span class="comment">//将192.168.1.1转换为172.16.1.1地址</span></span><br></pre></td></tr></table></figure>

<h4 id="动态nat"><a href="#动态nat" class="headerlink" title="动态nat"></a>动态nat</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	R1:</span><br><span class="line">[R1]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]undo nat <span class="keyword">static</span> global <span class="number">172.16</span><span class="number">.1</span><span class="number">.1</span> inside <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line"><span class="comment">//删除刚才的静态nat</span></span><br><span class="line">[R1]nat address-group <span class="number">1</span> <span class="number">172.16</span><span class="number">.1</span><span class="number">.1</span> <span class="number">172.16</span><span class="number">.1</span><span class="number">.5</span></span><br><span class="line"><span class="comment">//分配一个地址1.1-1.5</span></span><br><span class="line">[R1]acl <span class="number">2000</span> <span class="comment">//创建一标准的ACL</span></span><br><span class="line">[R1-acl-basic-<span class="number">2000</span>]rule <span class="number">5</span> permit source <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.255</span><span class="comment">//允许1.0网段通过</span></span><br><span class="line">[R1-acl-basic-<span class="number">2000</span>]quit</span><br><span class="line">[R1]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]nat outbound <span class="number">2000</span> address-group <span class="number">1</span> no-pat <span class="comment">//运用在这个端口上</span></span><br></pre></td></tr></table></figure>

<p> 这个时候ping1.0网段不通：可以配置R2的静态路由，在ping的同时可以抓取R2中g0&#x2F;0&#x2F;0端口数据包查看 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;ping <span class="number">10.10</span><span class="number">.1</span><span class="number">.2</span></span><br><span class="line">Ping <span class="number">10.10</span><span class="number">.1</span><span class="number">.2</span>: <span class="number">32</span> data bytes, Press Ctrl_C to <span class="keyword">break</span></span><br><span class="line">Request timeout!</span><br><span class="line">Request timeout!</span><br><span class="line">Request timeout!</span><br><span class="line">Request timeout!</span><br><span class="line">Request timeout!</span><br></pre></td></tr></table></figure>

<p> 给R2配置静态路由： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;R2&gt;system-view </span><br><span class="line">[R2]ip route-<span class="keyword">static</span> <span class="number">172.16</span><span class="number">.1</span><span class="number">.0</span> <span class="number">24</span> <span class="number">10.10</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">    <span class="comment">//目的网段 子网掩码 下一跳</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//这个时候在ping就可以通了</span></span><br><span class="line">PC&gt;ping <span class="number">10.10</span><span class="number">.1</span><span class="number">.2</span></span><br><span class="line">Ping <span class="number">10.10</span><span class="number">.1</span><span class="number">.2</span>: <span class="number">32</span> data bytes, Press Ctrl_C to <span class="keyword">break</span></span><br><span class="line">From <span class="number">10.10</span><span class="number">.1</span><span class="number">.2</span>: bytes=<span class="number">32</span> seq=<span class="number">1</span> ttl=<span class="number">254</span> time=<span class="number">47</span> ms</span><br><span class="line">From <span class="number">10.10</span><span class="number">.1</span><span class="number">.2</span>: bytes=<span class="number">32</span> seq=<span class="number">2</span> ttl=<span class="number">254</span> time=<span class="number">93</span> ms</span><br></pre></td></tr></table></figure>

<h4 id="NAPT配置"><a href="#NAPT配置" class="headerlink" title="NAPT配置"></a>NAPT配置</h4><p>也是需要ACL规则和地址池的，接上面的R2静态路由</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">R1:</span><br><span class="line">[R1]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]undo nat outbound <span class="number">2000</span> address-group <span class="number">1</span> no-pat</span><br><span class="line"><span class="comment">//删除刚才的动态nat</span></span><br><span class="line">[R1]nat address-group <span class="number">1</span> <span class="number">172.16</span><span class="number">.1</span><span class="number">.1</span> <span class="number">172.16</span><span class="number">.1</span><span class="number">.5</span></span><br><span class="line"><span class="comment">//分配一个地址1.1-1.5</span></span><br><span class="line">[R1]acl <span class="number">2000</span> <span class="comment">//创建一标准的ACL</span></span><br><span class="line">[R1-acl-basic-<span class="number">2000</span>]rule <span class="number">5</span> permit source <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.255</span><span class="comment">//允许1.0网段通过</span></span><br><span class="line">[R1-acl-basic-<span class="number">2000</span>]quit</span><br><span class="line">[R1]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]nat outbound <span class="number">2000</span> address-group <span class="number">1</span> <span class="comment">//运用在这个端口上</span></span><br></pre></td></tr></table></figure>

<h4 id="easy-IP"><a href="#easy-IP" class="headerlink" title="easy IP"></a>easy IP</h4><p>也需要ACL规则但是不需要地址池</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;R1&gt;system-view </span><br><span class="line">[R1]un in en</span><br><span class="line">[R1]<span class="type">int</span> g0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">[R1-GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span>]nat outbound <span class="number">2000</span></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://unclecheng-li.github.io">挖掘机师傅</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://unclecheng-li.github.io/2022/09/11/%E5%9F%BA%E4%BA%8EENSP%E7%9A%84%E5%8D%83%E4%BA%BA%E8%A7%84%E6%A8%A1%E5%86%97%E4%BD%99%E5%9E%8B%E4%BC%81%E4%B8%9A-%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%A7%84%E5%88%92/">https://unclecheng-li.github.io/2022/09/11/%E5%9F%BA%E4%BA%8EENSP%E7%9A%84%E5%8D%83%E4%BA%BA%E8%A7%84%E6%A8%A1%E5%86%97%E4%BD%99%E5%9E%8B%E4%BC%81%E4%B8%9A-%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%A7%84%E5%88%92/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://unclecheng-li.github.io" target="_blank">UncleC's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ensp%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C/">ensp网络实验</a></div><div class="post_share"><div class="social-share" data-image="https://s1.imagehub.cc/images/2022/09/12/04.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/09/18/%E5%B8%B8%E8%A7%81%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E5%9B%BE%E5%83%8F/"><img class="prev-cover" src="https://s1.imagehub.cc/images/2022/09/18/desmos-7.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">常见三角函数图像</div></div></a></div><div class="next-post pull-right"><a href="/2022/09/05/%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E4%BA%8C%E5%B1%82%E7%BD%91%E7%BB%9C%E8%A7%84%E5%88%92%E4%B8%8E%E8%AE%BE%E8%AE%A1/"><img class="next-cover" src="https://s1.imagehub.cc/images/2022/09/05/032307936ee27bcc38.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">防火墙双机热备二层网络规划与设计</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/09/05/%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E4%BA%8C%E5%B1%82%E7%BD%91%E7%BB%9C%E8%A7%84%E5%88%92%E4%B8%8E%E8%AE%BE%E8%AE%A1/" title="防火墙双机热备二层网络规划与设计"><img class="cover" src="https://s1.imagehub.cc/images/2022/09/05/032307936ee27bcc38.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-05</div><div class="title">防火墙双机热备二层网络规划与设计</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://avatars.githubusercontent.com/u/55303635?s=400&amp;u=1035a04b6e0bd0e8543b68f2caad21c0a5077aab&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">挖掘机师傅</div><div class="author-info__description">UncleCheng的个人博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Unclecheng-li"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Unclecheng-li" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/37858284?spm_id_from=333.1007.0.0" target="_blank" title="BiliBili"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EeNSP%E7%9A%84%E5%8D%83%E4%BA%BA%E8%A7%84%E6%A8%A1%E5%86%97%E4%BD%99%E5%9E%8B%E4%BC%81%E4%B8%9A-x2F-%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%A7%84%E5%88%92"><span class="toc-number">1.</span> <span class="toc-text">基于eNSP的千人规模冗余型企业&#x2F;校园网络设计与规划</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">前言简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%AE%BE%E8%AE%A1%E8%A6%81%E6%B1%82%E4%B8%8E%E8%AE%BE%E8%AE%A1topo%E5%9B%BE"><span class="toc-number">1.2.</span> <span class="toc-text">一、设计要求与设计topo图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">1.3.</span> <span class="toc-text">二、需求分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E8%AE%BE%E8%AE%A1%E8%A6%81%E6%B1%82%E4%B8%8E%E5%89%8D%E6%8F%90"><span class="toc-number">1.4.</span> <span class="toc-text">三、设计要求与前提</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%BD%91%E7%BB%9Ctopo%E5%88%86%E6%9E%90%E5%8F%8A%E5%85%B6%E8%A7%84%E5%88%92"><span class="toc-number">1.5.</span> <span class="toc-text">四、网络topo分析及其规划</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.6.</span> <span class="toc-text">五、设计与实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81VLAN-Trunk%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.1.</span> <span class="toc-text">1、VLAN Trunk配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81vlan%E7%9A%84%E5%BA%95%E5%B1%82%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.2.</span> <span class="toc-text">2、vlan的底层配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81MSTP%E5%A4%9A%E7%94%9F%E6%88%90%E6%A0%91%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.3.</span> <span class="toc-text">3、MSTP多生成树配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81VRRP%E7%BD%91%E5%85%B3%E5%86%97%E4%BD%99%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.4.</span> <span class="toc-text">4、VRRP网关冗余配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E9%AA%8C%E8%AF%81VRRP%E7%BD%91%E5%85%B3%E5%86%97%E4%BD%99%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.5.</span> <span class="toc-text">5、验证VRRP网关冗余的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81BFD%E8%B7%AF%E7%94%B1%E8%81%94%E5%8A%A8"><span class="toc-number">1.6.6.</span> <span class="toc-text">6、BFD路由联动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81OSPF%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.7.</span> <span class="toc-text">7、OSPF配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81RIP%E5%8D%8F%E8%AE%AE%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.8.</span> <span class="toc-text">8、RIP协议配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81NAT%E8%BD%AC%E6%8D%A2%E9%85%8D%E7%BD%AE-%E8%B5%B0%E8%81%94%E9%80%9A%E7%9A%84-%E7%94%B5%E4%BF%A1%E5%81%9APPPoE"><span class="toc-number">1.6.9.</span> <span class="toc-text">9、NAT转换配置(走联通的,电信做PPPoE)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81DHCP%E4%B8%AD%E7%BB%A7"><span class="toc-number">1.6.10.</span> <span class="toc-text">10、DHCP中继</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%E3%80%81PPPoE%E7%82%B9%E5%AF%B9%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.11.</span> <span class="toc-text">11、PPPoE点对点配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12%E3%80%81%E5%87%BA%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.12.</span> <span class="toc-text">12、出口配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13%E3%80%81NAT-server%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84"><span class="toc-number">1.6.13.</span> <span class="toc-text">13、NAT server地址映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14%E3%80%81ACL%E7%AD%96%E7%95%A5%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.14.</span> <span class="toc-text">14、ACL策略路由配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15%E3%80%81Telnet%E8%BF%9C%E7%A8%8B%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.15.</span> <span class="toc-text">15、Telnet远程配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16%E3%80%81%E9%85%8D%E7%BD%AE%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C"><span class="toc-number">1.6.16.</span> <span class="toc-text">16、配置无线网络</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%8D%95%E4%B8%AA%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E6%A1%88%E4%BE%8B"><span class="toc-number">1.7.</span> <span class="toc-text">六、单个关键技术的设计与实现案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.7.1.</span> <span class="toc-text">1、路由器静态路由实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%85%8D%E7%BD%AE%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.7.2.</span> <span class="toc-text">2、交换机VLAN配置实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1RIP%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.7.3.</span> <span class="toc-text">3、动态路由RIP实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1OSPF%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.7.4.</span> <span class="toc-text">4、动态路由OSPF实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9CWLAN"><span class="toc-number">1.7.5.</span> <span class="toc-text">5、无线网络WLAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E8%B7%AF%E7%94%B1DHCP%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.7.6.</span> <span class="toc-text">6、路由DHCP实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Eglobal%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">1.7.6.1.</span> <span class="toc-text">基于global全局配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Einterface%E6%8E%A5%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="toc-number">1.7.6.2.</span> <span class="toc-text">基于interface接口配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8ACL%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.7.7.</span> <span class="toc-text">7、访问控制列表ACL实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1%E6%8A%80%E6%9C%AF"><span class="toc-number">1.7.8.</span> <span class="toc-text">8、单臂路由技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT%E6%8A%80%E6%9C%AF%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.7.9.</span> <span class="toc-text">9、地址转换NAT技术实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81nat"><span class="toc-number">1.7.9.1.</span> <span class="toc-text">静态nat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81nat"><span class="toc-number">1.7.9.2.</span> <span class="toc-text">动态nat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NAPT%E9%85%8D%E7%BD%AE"><span class="toc-number">1.7.9.3.</span> <span class="toc-text">NAPT配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#easy-IP"><span class="toc-number">1.7.9.4.</span> <span class="toc-text">easy IP</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/10/10/%5B%E8%93%9D%E6%A1%A5%E6%9D%AF%5D%E5%8E%86%E5%B1%8A%E8%AF%95%E9%A2%98(2)/" title="&lt;蓝桥杯&gt;历届试题(2)"><img src="https://s1.imagehub.cc/images/2022/10/19/LQ2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="&lt;蓝桥杯&gt;历届试题(2)"/></a><div class="content"><a class="title" href="/2022/10/10/%5B%E8%93%9D%E6%A1%A5%E6%9D%AF%5D%E5%8E%86%E5%B1%8A%E8%AF%95%E9%A2%98(2)/" title="&lt;蓝桥杯&gt;历届试题(2)">&lt;蓝桥杯&gt;历届试题(2)</a><time datetime="2022-10-10T07:22:07.000Z" title="发表于 2022-10-10 15:22:07">2022-10-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/10/%5B%E8%93%9D%E6%A1%A5%E6%9D%AF%5D%E5%8E%86%E5%B1%8A%E8%AF%95%E9%A2%98(1)/" title="&lt;蓝桥杯&gt;历届试题(1)"><img src="https://s1.imagehub.cc/images/2022/10/19/LQ2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="&lt;蓝桥杯&gt;历届试题(1)"/></a><div class="content"><a class="title" href="/2022/10/10/%5B%E8%93%9D%E6%A1%A5%E6%9D%AF%5D%E5%8E%86%E5%B1%8A%E8%AF%95%E9%A2%98(1)/" title="&lt;蓝桥杯&gt;历届试题(1)">&lt;蓝桥杯&gt;历届试题(1)</a><time datetime="2022-10-10T06:26:07.000Z" title="发表于 2022-10-10 14:26:07">2022-10-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/06/2021%E7%AC%AC%E5%9B%9B%E5%B1%8A-%E4%BC%A0%E6%99%BA%E6%9D%AF-%E7%BB%83%E4%B9%A0%E8%B5%9BString-format%E6%96%B9%E6%B3%95%E9%A2%98%E5%BA%94%E7%94%A8-C%E8%AF%AD%E8%A8%80%E7%BD%91%E9%A2%98%E5%BA%931806-1807-1808-1809-1810/" title="2021第四届[传智杯]练习赛String.format方法题应用(C语言网题库1806,1807,1808,1809,1810)"><img src="https://s1.imagehub.cc/images/2022/10/06/CZB2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2021第四届[传智杯]练习赛String.format方法题应用(C语言网题库1806,1807,1808,1809,1810)"/></a><div class="content"><a class="title" href="/2022/10/06/2021%E7%AC%AC%E5%9B%9B%E5%B1%8A-%E4%BC%A0%E6%99%BA%E6%9D%AF-%E7%BB%83%E4%B9%A0%E8%B5%9BString-format%E6%96%B9%E6%B3%95%E9%A2%98%E5%BA%94%E7%94%A8-C%E8%AF%AD%E8%A8%80%E7%BD%91%E9%A2%98%E5%BA%931806-1807-1808-1809-1810/" title="2021第四届[传智杯]练习赛String.format方法题应用(C语言网题库1806,1807,1808,1809,1810)">2021第四届[传智杯]练习赛String.format方法题应用(C语言网题库1806,1807,1808,1809,1810)</a><time datetime="2022-10-06T03:13:07.000Z" title="发表于 2022-10-06 11:13:07">2022-10-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/06/2021%E7%AC%AC%E5%9B%9B%E5%B1%8A-%E4%BC%A0%E6%99%BA%E6%9D%AF-%E7%BB%83%E4%B9%A0%E8%B5%9B/" title="2021第四届[传智杯]练习赛"><img src="https://s1.imagehub.cc/images/2022/10/06/CZB2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2021第四届[传智杯]练习赛"/></a><div class="content"><a class="title" href="/2022/10/06/2021%E7%AC%AC%E5%9B%9B%E5%B1%8A-%E4%BC%A0%E6%99%BA%E6%9D%AF-%E7%BB%83%E4%B9%A0%E8%B5%9B/" title="2021第四届[传智杯]练习赛">2021第四届[传智杯]练习赛</a><time datetime="2022-10-06T02:35:33.000Z" title="发表于 2022-10-06 10:35:33">2022-10-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/18/%E5%B8%B8%E8%A7%81%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E5%9B%BE%E5%83%8F/" title="常见三角函数图像"><img src="https://s1.imagehub.cc/images/2022/09/18/desmos-7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常见三角函数图像"/></a><div class="content"><a class="title" href="/2022/09/18/%E5%B8%B8%E8%A7%81%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E5%9B%BE%E5%83%8F/" title="常见三角函数图像">常见三角函数图像</a><time datetime="2022-09-18T06:32:45.000Z" title="发表于 2022-09-18 14:32:45">2022-09-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s1.imagehub.cc/images/2022/09/11/04.png')"><div id="footer-wrap"><div class="copyright">&copy;2022 By 挖掘机师傅</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">you know, i will be the brand new age yeah from this day.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="Uncle,Cheng" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>